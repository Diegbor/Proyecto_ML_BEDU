<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Equipo 24 BEDU">

<title>Proyecto Consumo de Agua</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/clipboard/clipboard.min.js"></script>
<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/quarto.js"></script>
<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/popper.min.js"></script>
<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/anchor.min.js"></script>
<link href="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Proyecto Equipo 24 - Consumo de Agua CDMX Completo_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#consumo-de-agua-en-ciudad-de-méxico." id="toc-consumo-de-agua-en-ciudad-de-méxico." class="nav-link active" data-scroll-target="#consumo-de-agua-en-ciudad-de-méxico.">Consumo de Agua en Ciudad de México.</a>
  <ul class="collapse">
  <li><a href="#objetivo" id="toc-objetivo" class="nav-link" data-scroll-target="#objetivo">Objetivo</a></li>
  <li><a href="#descripción-de-nuestra-base-de-datos." id="toc-descripción-de-nuestra-base-de-datos." class="nav-link" data-scroll-target="#descripción-de-nuestra-base-de-datos.">Descripción de nuestra Base de Datos.</a>
  <ul class="collapse">
  <li><a href="#lectura-de-datos" id="toc-lectura-de-datos" class="nav-link" data-scroll-target="#lectura-de-datos">Lectura de Datos:</a></li>
  </ul></li>
  <li><a href="#consumo-de-agua-en-ciudad-de-méxico" id="toc-consumo-de-agua-en-ciudad-de-méxico" class="nav-link" data-scroll-target="#consumo-de-agua-en-ciudad-de-méxico">Consumo de Agua en Ciudad de México</a>
  <ul class="collapse">
  <li><a href="#preprocesamiento-de-datos" id="toc-preprocesamiento-de-datos" class="nav-link" data-scroll-target="#preprocesamiento-de-datos">Preprocesamiento de Datos</a></li>
  <li><a href="#análisis-exploratorio" id="toc-análisis-exploratorio" class="nav-link" data-scroll-target="#análisis-exploratorio">Análisis Exploratorio</a></li>
  <li><a href="#análisis-de-la-distribución-de-los-datos." id="toc-análisis-de-la-distribución-de-los-datos." class="nav-link" data-scroll-target="#análisis-de-la-distribución-de-los-datos.">Análisis de la distribución de los datos.</a></li>
  <li><a href="#distribuciones" id="toc-distribuciones" class="nav-link" data-scroll-target="#distribuciones">Distribuciones</a></li>
  <li><a href="#principales-inferencias-de-la-información" id="toc-principales-inferencias-de-la-información" class="nav-link" data-scroll-target="#principales-inferencias-de-la-información">Principales inferencias de la información</a></li>
  </ul></li>
  <li><a href="#registro-histórico-de-reportes-de-fugas-2018---2022" id="toc-registro-histórico-de-reportes-de-fugas-2018---2022" class="nav-link" data-scroll-target="#registro-histórico-de-reportes-de-fugas-2018---2022">Registro Histórico de Reportes de Fugas 2018 - 2022</a>
  <ul class="collapse">
  <li><a href="#preprocesamiento-de-datos-1" id="toc-preprocesamiento-de-datos-1" class="nav-link" data-scroll-target="#preprocesamiento-de-datos-1">Preprocesamiento de Datos</a></li>
  <li><a href="#análisis-exploratorio-1" id="toc-análisis-exploratorio-1" class="nav-link" data-scroll-target="#análisis-exploratorio-1">Análisis Exploratorio</a></li>
  <li><a href="#análisis-de-la-distribución-de-los-datos.-1" id="toc-análisis-de-la-distribución-de-los-datos.-1" class="nav-link" data-scroll-target="#análisis-de-la-distribución-de-los-datos.-1">Análisis de la distribución de los datos.</a></li>
  <li><a href="#distribuciones-1" id="toc-distribuciones-1" class="nav-link" data-scroll-target="#distribuciones-1">Distribuciones</a></li>
  <li><a href="#principales-inferencias-de-la-información-1" id="toc-principales-inferencias-de-la-información-1" class="nav-link" data-scroll-target="#principales-inferencias-de-la-información-1">Principales inferencias de la información</a></li>
  </ul></li>
  <li><a href="#metodología-del-modelo" id="toc-metodología-del-modelo" class="nav-link" data-scroll-target="#metodología-del-modelo">Metodología del Modelo</a>
  <ul class="collapse">
  <li><a href="#resultados-shiny" id="toc-resultados-shiny" class="nav-link" data-scroll-target="#resultados-shiny">Resultados Shiny</a></li>
  </ul></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones">Conclusiones</a></li>
  <li><a href="#referencias" id="toc-referencias" class="nav-link" data-scroll-target="#referencias">Referencias</a></li>
  <li><a href="#integrantes" id="toc-integrantes" class="nav-link" data-scroll-target="#integrantes">Integrantes:</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Proyecto Consumo de Agua</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Equipo 24 BEDU </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-right">
<figure class="figure">
<p><img src="Imagen1.png" class="img-fluid figure-img"></p>
</figure>
</div>
<section id="consumo-de-agua-en-ciudad-de-méxico." class="level1">
<h1>Consumo de Agua en Ciudad de México.</h1>
<section id="objetivo" class="level2">
<h2 class="anchored" data-anchor-id="objetivo">Objetivo</h2>
<p>El consumo general de agua en México es uno de las preocupaciones más grandes de los últimos años debido a la creciente escasez en toda la República. Con los años, se han registrado cientos de casos donde las demandas de agua potable a viviendas han excedido debido al incremento de viviendas, población y la falta de mantenimiento en el servicio de tuberías, lo que ha causado fugas de agua constantemente.</p>
<p>Nuestro trabajo pretende analizar datos del consumo del agua en las alcaldías de la Ciudad de México obtenidos de SACMEX, comparando los resultados de los tres primeros bimestres de 2019. También analizar los registros de reportes de fugas de agua, mala calidad y falta de agua en la Ciudad de México, obtenidos de SACMEX a partir de 2020 con un modelo de series de tiempo.</p>
<p>El objetivo del proyecto es poder evaluar y predecir la cantidad de fugas de agua en la Ciudad de México, haciendo una comparación con el incremento de consumo de agua en las diferentes alcaldías de la Ciudad de México.</p>
</section>
<section id="descripción-de-nuestra-base-de-datos." class="level2">
<h2 class="anchored" data-anchor-id="descripción-de-nuestra-base-de-datos.">Descripción de nuestra Base de Datos.</h2>
<ol type="1">
<li><p><strong>Datos obtenidos de SACMEX: información del primer bimestre de 2019 por concepto de suministro de agua a nivel manzana considerando la facturación por servicio de consumo medido y promedio.</strong> <a href="https://datos.cdmx.gob.mx/sv/dataset/consumo-agua" class="uri"><strong>https://datos.cdmx.gob.mx/sv/dataset/consumo-agua</strong></a></p></li>
<li><p><strong>Reportes de agua: información diaria</strong>&nbsp;<strong>referente a los reportes realizados por ciudadanos con respecto a servicios del Sistema de Aguas de la Ciudad de México en tres ejes:&nbsp;Drenaje, agua potable y agua tratada.</strong> <a href="https://datos.cdmx.gob.mx/dataset/reportes-de-agua" class="uri">https://datos.cdmx.gob.mx/dataset/reportes-de-agua</a></p></li>
</ol>
<section id="lectura-de-datos" class="level3">
<h3 class="anchored" data-anchor-id="lectura-de-datos">Lectura de Datos:</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías </span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># gráficas</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)   <span class="co"># dataframes </span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Consumo de agua Histórico 2019</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos de la base de datos de consumo de agua del primer bimestre de 2019 en Ciudad de México.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>df.consumo <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/consumo_agua_historico_2019.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Reportes de fugas. https://datos.cdmx.gob.mx/dataset/reportes-de-agua</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos de la base de datos de reporte de fugas en Ciudad de México de 2018 a 2022.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/reportes_agua_hist.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="consumo-de-agua-en-ciudad-de-méxico" class="level2">
<h2 class="anchored" data-anchor-id="consumo-de-agua-en-ciudad-de-méxico">Consumo de Agua en Ciudad de México</h2>
<section id="preprocesamiento-de-datos" class="level3">
<h3 class="anchored" data-anchor-id="preprocesamiento-de-datos">Preprocesamiento de Datos</h3>
<p><strong>Descripción inicial de los atributos de los dato</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clase de dataframe </span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensión del dataframe </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df.consumo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 71102    16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de los dataframe </span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>(<span class="fu">str</span>(df.consumo))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   71102 obs. of  16 variables:
 $ fecha_referencia    : chr  "2019-06-30" "2019-06-30" "2019-06-30" "2019-06-30" ...
 $ anio                : int  2019 2019 2019 2019 2019 2019 2019 2019 2019 2019 ...
 $ bimestre            : int  3 3 3 3 3 3 3 3 3 3 ...
 $ consumo_total_mixto : num  159.7 0 0 0 56.7 ...
 $ consumo_prom_dom    : num  42.6 35.9 24.6 0 67.4 ...
 $ consumo_total_dom   : num  468 108 123 0 539 ...
 $ consumo_prom_mixto  : num  53.2 0 0 0 56.7 ...
 $ consumo_total       : num  631 115 198 254 839 ...
 $ consumo_prom        : num  42.1 28.8 33 84.5 76.3 ...
 $ consumo_prom_no_dom : num  3.05 7.32 75.03 84.51 121.57 ...
 $ consumo_total_no_dom: num  3.05 7.32 75.03 253.53 243.14 ...
 $ indice_des          : chr  "ALTO" "MEDIO" "POPULAR" "BAJO" ...
 $ colonia             : chr  "7 DE NOVIEMBRE" "7 DE NOVIEMBRE" "7 DE NOVIEMBRE" "GERTRUDIS SANCHEZ 3A SECCION" ...
 $ alcaldia            : chr  "GUSTAVO A. MADERO" "GUSTAVO A. MADERO" "GUSTAVO A. MADERO" "GUSTAVO A. MADERO" ...
 $ latitud             : num  19.5 19.5 19.5 19.5 19.5 ...
 $ longitud            : num  -99.1 -99.1 -99.1 -99.1 -99.1 ...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeras filas. </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df.consumo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  fecha_referencia anio bimestre consumo_total_mixto consumo_prom_dom
1       2019-06-30 2019        3              159.72         42.56636
2       2019-06-30 2019        3                0.00         35.93667
3       2019-06-30 2019        3                0.00         24.58600
4       2019-06-30 2019        3                0.00          0.00000
5       2019-06-30 2019        3               56.72         67.43625
6       2019-06-30 2019        3              439.77         35.67577
  consumo_total_dom consumo_prom_mixto consumo_total consumo_prom
1            468.23           53.24000        631.00     42.06667
2            107.81            0.00000        115.13     28.78250
3            122.93            0.00000        197.96     32.99333
4              0.00            0.00000        253.53     84.51000
5            539.49           56.72000        839.35     76.30455
6            927.57           54.97125       1399.67     37.82892
  consumo_prom_no_dom consumo_total_no_dom indice_des
1             3.05000                 3.05       ALTO
2             7.32000                 7.32      MEDIO
3            75.03000                75.03    POPULAR
4            84.51000               253.53       BAJO
5           121.57000               243.14       BAJO
6            10.77667                32.33       BAJO
                       colonia          alcaldia  latitud  longitud
1               7 DE NOVIEMBRE GUSTAVO A. MADERO 19.45526 -99.11266
2               7 DE NOVIEMBRE GUSTAVO A. MADERO 19.45526 -99.11266
3               7 DE NOVIEMBRE GUSTAVO A. MADERO 19.45572 -99.11358
4 GERTRUDIS SANCHEZ 3A SECCION GUSTAVO A. MADERO 19.45965 -99.10447
5                  PRO HOGAR I      AZCAPOTZALCO 19.47416 -99.14675
6      TRABAJADORES DEL HIERRO      AZCAPOTZALCO 19.47861 -99.15057</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acomodamos las filas </span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>df.consumo <span class="ot">&lt;-</span> df.consumo[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>)]</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de las columnas </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.consumo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "fecha_referencia"     "anio"                 "bimestre"            
 [4] "consumo_prom_mixto"   "consumo_total_mixto"  "consumo_prom_dom"    
 [7] "consumo_total_dom"    "consumo_prom_no_dom"  "consumo_total_no_dom"
[10] "consumo_prom"         "consumo_total"        "indice_des"          
[13] "colonia"              "alcaldia"             "latitud"             
[16] "longitud"            </code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> fecha_referencia        anio         bimestre     consumo_prom_mixto
 Length:71102       Min.   :2019   Min.   :1.000   Min.   :    0.00  
 Class :character   1st Qu.:2019   1st Qu.:1.000   1st Qu.:    0.00  
 Mode  :character   Median :2019   Median :2.000   Median :   33.45  
                    Mean   :2019   Mean   :2.007   Mean   :   50.64  
                    3rd Qu.:2019   3rd Qu.:3.000   3rd Qu.:   61.22  
                    Max.   :2019   Max.   :3.000   Max.   :11702.22  
                                                   NA's   :8327      
 consumo_total_mixto consumo_prom_dom  consumo_total_dom consumo_prom_no_dom
 Min.   :    0.00    Min.   :   0.00   Min.   :    0.0   Min.   :    0.00   
 1st Qu.:    0.00    1st Qu.:  18.69   1st Qu.:  161.6   1st Qu.:    6.28   
 Median :   79.94    Median :  26.41   Median :  604.2   Median :   19.28   
 Mean   :  174.36    Mean   :  29.13   Mean   : 1186.3   Mean   :  126.76   
 3rd Qu.:  233.32    3rd Qu.:  36.25   3rd Qu.: 1261.4   3rd Qu.:   54.19   
 Max.   :23404.44    Max.   :7796.41   Max.   :95060.7   Max.   :89691.77   
 NA's   :8327        NA's   :4820      NA's   :4820                         
 consumo_total_no_dom  consumo_prom      consumo_total       indice_des       
 Min.   :     0.00    Min.   :    0.00   Min.   :     0.0   Length:71102      
 1st Qu.:    10.98    1st Qu.:   23.01   1st Qu.:   340.9   Class :character  
 Median :    54.06    Median :   31.69   Median :   896.2   Mode  :character  
 Mean   :   436.06    Mean   :  111.22   Mean   :  1695.8                     
 3rd Qu.:   230.43    3rd Qu.:   45.48   3rd Qu.:  1808.9                     
 Max.   :119726.94    Max.   :89691.77   Max.   :119726.9                     
                                                                              
   colonia            alcaldia            latitud         longitud     
 Length:71102       Length:71102       Min.   :19.14   Min.   :-99.34  
 Class :character   Class :character   1st Qu.:19.34   1st Qu.:-99.17  
 Mode  :character   Mode  :character   Median :19.39   Median :-99.14  
                                       Mean   :19.39   Mean   :-99.13  
                                       3rd Qu.:19.45   3rd Qu.:-99.10  
                                       Max.   :19.58   Max.   :-98.95  
                                                                       </code></pre>
</div>
</div>
<p>Podemos notar que existen 16 columnas con la siguiente información:</p>
<ol type="1">
<li><p>fecha de referencia tiene clase de character, lo que debemos cambiar.</p></li>
<li><p>El año único es 2019 por lo que no se necesita esa columna en la base.</p></li>
<li><p>La columna de bimestre solo tiene tres datos que son cualitativos ordinales, que corresponden al primer, segundo y tercer bimestre del año 2019.</p></li>
<li><p>La columan_total_mixto se refiere a: el consumo total en inmuebles de uso Doméstico y no doméstico simultáneamente.</p></li>
<li><p>consumo_prom_dom se refiere al consumo promedio en inmuebles de uso Doméstico.</p></li>
<li><p>consumo_total_dom se refiere al consumo total en inmuebles de uso Doméstico</p></li>
<li><p>consumo_prom_mixto se refiere al consumo de uso Doméstico y no doméstico.</p></li>
<li><p>consumo_total se refiere al consumo total Doméstico, No doméstico y mixto.</p></li>
<li><p>consumo_prom se refiere al consumo promedio Doméstico, No doméstico y mixto.</p></li>
<li><p>consumo_prom_no_dom se refiere al consumo promedio No Doméstico.</p></li>
<li><p>consumo_total_no_dom se refiere al consumo total No Doméstico.</p></li>
<li><p>indice_des: Construcción estadística mediante variables de tipo socioeconómico derivadas de información oficial, permite diferenciar territorialmente a la población de la Ciudad de México de acuerdo a su nivel de desarrollo económico, agregando la información a nivel manzana. ALTO, MEDIO, BAJO Y POPULAR.</p></li>
<li><p>colonia</p></li>
<li><p>alcaldía: 16 alcaldías de la Ciudad de México</p></li>
<li><p>latitud</p></li>
<li><p>longitud</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna fecha_referencia</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>df.consumo<span class="sc">$</span>fecha_referencia <span class="ot">&lt;-</span> <span class="fu">as.Date.character</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
<p><strong>Análisis de Datos Nulos</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.consumo), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      NA.
fecha_referencia        0
anio                    0
bimestre                0
consumo_prom_mixto   8327
consumo_total_mixto  8327
consumo_prom_dom     4820
consumo_total_dom    4820
consumo_prom_no_dom     0
consumo_total_no_dom    0
consumo_prom            0
consumo_total           0
indice_des              0
colonia               216
alcaldia              216
latitud                 0
longitud                0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de alcaldía </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>df.consumo.alcaldia <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.consumo<span class="sc">$</span>alcaldia)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>df.consumo.clean <span class="ot">&lt;-</span> df.consumo[df.consumo.alcaldia,]</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.consumo.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                      NA.
fecha_referencia        0
anio                    0
bimestre                0
consumo_prom_mixto   8292
consumo_total_mixto  8292
consumo_prom_dom     4801
consumo_total_dom    4801
consumo_prom_no_dom     0
consumo_total_no_dom    0
consumo_prom            0
consumo_total           0
indice_des              0
colonia                 0
alcaldia                0
latitud                 0
longitud                0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Quitar columna de año 2019</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df.consumo.clean <span class="ot">&lt;-</span> df.consumo.clean[,<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.consumo.clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "fecha_referencia"     "bimestre"             "consumo_prom_mixto"  
 [4] "consumo_total_mixto"  "consumo_prom_dom"     "consumo_total_dom"   
 [7] "consumo_prom_no_dom"  "consumo_total_no_dom" "consumo_prom"        
[10] "consumo_total"        "indice_des"           "colonia"             
[13] "alcaldia"             "latitud"              "longitud"            </code></pre>
</div>
</div>
</section>
<section id="análisis-exploratorio" class="level3">
<h3 class="anchored" data-anchor-id="análisis-exploratorio">Análisis Exploratorio</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo.clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> fecha_referencia        bimestre     consumo_prom_mixto consumo_total_mixto
 Min.   :2019-02-28   Min.   :1.000   Min.   :    0.00   Min.   :    0.00   
 1st Qu.:2019-02-28   1st Qu.:1.000   1st Qu.:    0.00   1st Qu.:    0.00   
 Median :2019-04-30   Median :2.000   Median :   33.54   Median :   80.09   
 Mean   :2019-04-30   Mean   :2.007   Mean   :   50.72   Mean   :  174.59   
 3rd Qu.:2019-06-30   3rd Qu.:3.000   3rd Qu.:   61.34   3rd Qu.:  233.64   
 Max.   :2019-06-30   Max.   :3.000   Max.   :11702.22   Max.   :23404.44   
                                      NA's   :8292       NA's   :8292       
 consumo_prom_dom  consumo_total_dom consumo_prom_no_dom consumo_total_no_dom
 Min.   :   0.00   Min.   :    0.0   Min.   :    0.00    Min.   :     0.00   
 1st Qu.:  18.75   1st Qu.:  162.7   1st Qu.:    6.27    1st Qu.:    10.98   
 Median :  26.43   Median :  605.1   Median :   19.30    Median :    54.02   
 Mean   :  29.09   Mean   : 1187.2   Mean   :  126.96    Mean   :   436.97   
 3rd Qu.:  36.27   3rd Qu.: 1262.4   3rd Qu.:   54.22    3rd Qu.:   230.65   
 Max.   :7796.41   Max.   :95060.7   Max.   :89691.77    Max.   :119726.94   
 NA's   :4801      NA's   :4801                                              
  consumo_prom      consumo_total       indice_des          colonia         
 Min.   :    0.00   Min.   :     0.0   Length:70886       Length:70886      
 1st Qu.:   23.05   1st Qu.:   342.7   Class :character   Class :character  
 Median :   31.72   Median :   897.2   Mode  :character   Mode  :character  
 Mean   :  111.41   Mean   :  1697.9                                        
 3rd Qu.:   45.49   3rd Qu.:  1810.7                                        
 Max.   :89691.77   Max.   :119726.9                                        
                                                                            
   alcaldia            latitud         longitud     
 Length:70886       Min.   :19.14   Min.   :-99.34  
 Class :character   1st Qu.:19.34   1st Qu.:-99.17  
 Mode  :character   Median :19.39   Median :-99.14  
                    Mean   :19.39   Mean   :-99.13  
                    3rd Qu.:19.45   3rd Qu.:-99.10  
                    Max.   :19.58   Max.   :-98.95  
                                                    </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar tipo de dato character a factor </span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>bimestre  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>bimestre)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>indice_des  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>indice_des)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>alcaldia  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>alcaldia)</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo.clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> fecha_referencia     bimestre  consumo_prom_mixto consumo_total_mixto
 Min.   :2019-02-28   1:23266   Min.   :    0.00   Min.   :    0.00   
 1st Qu.:2019-02-28   2:23870   1st Qu.:    0.00   1st Qu.:    0.00   
 Median :2019-04-30   3:23750   Median :   33.54   Median :   80.09   
 Mean   :2019-04-30             Mean   :   50.72   Mean   :  174.59   
 3rd Qu.:2019-06-30             3rd Qu.:   61.34   3rd Qu.:  233.64   
 Max.   :2019-06-30             Max.   :11702.22   Max.   :23404.44   
                                NA's   :8292       NA's   :8292       
 consumo_prom_dom  consumo_total_dom consumo_prom_no_dom consumo_total_no_dom
 Min.   :   0.00   Min.   :    0.0   Min.   :    0.00    Min.   :     0.00   
 1st Qu.:  18.75   1st Qu.:  162.7   1st Qu.:    6.27    1st Qu.:    10.98   
 Median :  26.43   Median :  605.1   Median :   19.30    Median :    54.02   
 Mean   :  29.09   Mean   : 1187.2   Mean   :  126.96    Mean   :   436.97   
 3rd Qu.:  36.27   3rd Qu.: 1262.4   3rd Qu.:   54.22    3rd Qu.:   230.65   
 Max.   :7796.41   Max.   :95060.7   Max.   :89691.77    Max.   :119726.94   
 NA's   :4801      NA's   :4801                                              
  consumo_prom      consumo_total        indice_des      colonia         
 Min.   :    0.00   Min.   :     0.0   ALTO   :15495   Length:70886      
 1st Qu.:   23.05   1st Qu.:   342.7   BAJO   :29164   Class :character  
 Median :   31.72   Median :   897.2   MEDIO  : 9748   Mode  :character  
 Mean   :  111.41   Mean   :  1697.9   POPULAR:16479                     
 3rd Qu.:   45.49   3rd Qu.:  1810.7                                     
 Max.   :89691.77   Max.   :119726.9                                     
                                                                         
                alcaldia        latitud         longitud     
 IZTAPALAPA         :10518   Min.   :19.14   Min.   :-99.34  
 GUSTAVO A. MADERO  :10058   1st Qu.:19.34   1st Qu.:-99.17  
 CUAUHTEMOC         : 7165   Median :19.39   Median :-99.14  
 BENITO JUAREZ      : 6049   Mean   :19.39   Mean   :-99.13  
 VENUSTIANO CARRANZA: 5207   3rd Qu.:19.45   3rd Qu.:-99.10  
 MIGUEL HIDALGO     : 5110   Max.   :19.58   Max.   :-98.95  
 (Other)            :26779                                   </code></pre>
</div>
</div>
</section>
<section id="análisis-de-la-distribución-de-los-datos." class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-la-distribución-de-los-datos.">Análisis de la distribución de los datos.</h3>
<p><strong>Análisis de las categorías de los datos.</strong></p>
<p>Tablas de Frecuencias y Gráficos de Barras para las columnas Bimestre, Índice de Desarrollo, Alcaldía</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de Frecuencias Absolutas, Relativas</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>freq_id <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">group_by</span>(alcaldia, bimestre, indice_des) <span class="sc">%&gt;%</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'alcaldia', 'bimestre'. You can override
using the `.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de Frecuencias absolutas</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>graf_id <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> indice_des, <span class="at">fill =</span> alcaldia)) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">facet_wrap</span>(<span class="sc">~</span>bimestre)<span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Consumo en m3 de agua"</span>, </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">subtitle =</span> <span class="st">"Por alcaldía e índice de desarrollo. 2019"</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> <span class="st">"Indice de Desarrollo"</span>,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>graf_id</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="distribuciones" class="level3">
<h3 class="anchored" data-anchor-id="distribuciones">Distribuciones</h3>
<p><strong>Medidas de Tendencia Central y Dispersión</strong></p>
<section id="análisis-por-bimestre" class="level4">
<h4 class="anchored" data-anchor-id="análisis-por-bimestre">Análisis por Bimestre</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para calcular medidas de tendencia central y dispersión.</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  calcular_medidas <span class="ot">&lt;-</span> <span class="cf">function</span>(dataframe, columna) {</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcular las medidas descriptivas</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    Max <span class="ot">&lt;-</span> <span class="fu">max</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    Min <span class="ot">&lt;-</span> <span class="fu">min</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tendencia Central</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    Media <span class="ot">&lt;-</span> <span class="fu">mean</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    Mediana <span class="ot">&lt;-</span> <span class="fu">median</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Medidas de Dispersión </span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    Varianza <span class="ot">&lt;-</span> <span class="fu">var</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    Desv <span class="ot">&lt;-</span> <span class="fu">sd</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    RangoIQ <span class="ot">&lt;-</span> <span class="fu">IQR</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    cuartiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(dataframe[[columna]], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>    deciles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(dataframe[[columna]], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.9</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    skw <span class="ot">&lt;-</span> <span class="fu">skewness</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>    kts <span class="ot">&lt;-</span> <span class="fu">kurtosis</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.1</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">1</span>]</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.2</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">2</span>]  </span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.3</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">3</span>]</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a>    d<span class="fl">.2</span> <span class="ot">&lt;-</span> deciles[<span class="dv">1</span>]</span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>    d<span class="fl">.9</span> <span class="ot">&lt;-</span> deciles [<span class="dv">2</span>]</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Crear un vector con las medidas</span></span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a>    medidas_vector <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">c</span>(Max, Min, Media, Mediana, Varianza, Desv, RangoIQ, </span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>                        q<span class="fl">.1</span>, q<span class="fl">.2</span>, q<span class="fl">.3</span>, d<span class="fl">.2</span>, d<span class="fl">.9</span>, skw, kts),<span class="dv">2</span>)</span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(medidas_vector)</span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionando datos por bimestre, quitando outliers alrededor del 10% de la cola derecha.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>out_nivel <span class="ot">&lt;-</span> <span class="dv">3000</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>bim_1 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>bim_2 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>bim_3 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>df.medidas.ct <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">totales =</span> <span class="fu">calcular_medidas</span>(df.consumo.clean, <span class="st">'consumo_total'</span>), </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                               <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 1'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_1, <span class="st">'consumo_total'</span>)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 2'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_2, <span class="st">'consumo_total'</span>)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 3'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_3, <span class="st">'consumo_total'</span>)</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>df.medidas.ct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                        totales bimestre 1 bimestre 2 bimestre 3
Máximo                119726.94    2998.75    2999.70    2999.91
Mínimo                     0.00       0.00       0.00       0.00
Media                   1697.90     875.00     897.65     899.42
Mediana                  897.16     732.06     756.78     758.84
Varianza            12670925.64  544759.93  559955.50  563425.77
Desviación Estándar     3559.62     738.08     748.30     750.62
Rango IQ                1468.01    1045.94    1084.73    1083.61
1q                       342.67     258.19     265.70     265.34
2q                       897.16     732.06     756.78     758.84
3q                      1810.68    1304.13    1350.43    1348.94
2d                       221.16     151.69     158.71     158.00
9d                      3645.84    1980.02    2022.46    2030.47
Skewness                  10.99       0.83       0.78       0.78
Curtosis                 198.56       2.96       2.84       2.83</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>out_nivel <span class="ot">&lt;-</span> <span class="dv">3000</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>df.outliers <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(consumo_total <span class="sc">&gt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(bimestre) <span class="sc">%&gt;%</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>))   </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.1</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>          <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.2</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>          <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.3</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>          <span class="fu">facet_wrap</span>(<span class="sc">~</span>bimestre) <span class="sc">+</span></span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>          <span class="co">#guides(fill = guide_legend(title = "Indice Desarrollo"))+</span></span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la libreria cowplot</span></span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>consumo_total_gr <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(graf<span class="fl">.1</span>, graf<span class="fl">.2</span>, graf<span class="fl">.3</span>)</span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>consumo_total_gr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="análisis-por-alcaldía" class="level4">
<h4 class="anchored" data-anchor-id="análisis-por-alcaldía">Análisis por Alcaldía</h4>
<p>Columnas numéricas: “consumo_total_mixto” “consumo_prom_dom” “consumo_total_dom” “consumo_prom_mixto” “consumo_total” “consumo_prom” “consumo_prom_no_dom” “consumo_total_no_dom”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para crear un dataframe con el resumen de las medidas por Alcaldía. </span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>df.con.num <span class="ot">&lt;-</span> <span class="fu">select</span>(df.consumo.clean, <span class="fu">c</span>(<span class="st">"alcaldia"</span>, <span class="st">"consumo_prom_mixto"</span>, <span class="st">"consumo_total_mixto"</span>,</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_prom_dom"</span>, <span class="st">"consumo_total_dom"</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_prom_no_dom"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_total_no_dom"</span>, <span class="st">"consumo_prom"</span>, <span class="st">"consumo_total"</span>))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>nom.col <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df.con.num[,<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>])</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>nom.col</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "consumo_prom_mixto"   "consumo_total_mixto"  "consumo_prom_dom"    
[4] "consumo_total_dom"    "consumo_prom_no_dom"  "consumo_total_no_dom"
[7] "consumo_prom"         "consumo_total"       </code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CAMBIAR EL NOMBRE DE LA ALCALDÍA (En aplicación Shiny se muestra más dinámico)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Alcaldía = Benito Juarez, Atributo = Consumo Promedio</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>BENITO<span class="fl">.1</span> <span class="ot">&lt;-</span> df.con.num <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, )</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>df.medidas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> nom.col){</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(df.medidas) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>      df.medidas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">calcular_medidas</span>(BENITO<span class="fl">.1</span>, i), </span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                               <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colnames</span>(df.medidas)[<span class="dv">1</span>] <span class="ot">&lt;-</span> nom.col[<span class="dv">1</span>]</span>
<span id="cb41-23"><a href="#cb41-23" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-24"><a href="#cb41-24" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb41-25"><a href="#cb41-25" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb41-26"><a href="#cb41-26" aria-hidden="true" tabindex="-1"></a>      df.medidas[, i] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(BENITO<span class="fl">.1</span>, i)</span>
<span id="cb41-27"><a href="#cb41-27" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb41-28"><a href="#cb41-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb41-29"><a href="#cb41-29" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb41-30"><a href="#cb41-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-31"><a href="#cb41-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-32"><a href="#cb41-32" aria-hidden="true" tabindex="-1"></a>df.medidas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    consumo_prom_mixto consumo_total_mixto consumo_prom_dom
Máximo                          917.82             2665.72           162.85
Mínimo                            0.00                0.00             0.00
Media                            65.75              191.26            24.88
Mediana                          43.69              104.90            23.70
Varianza                       6491.03            64212.42           139.17
Desviación Estándar              80.57              253.40            11.80
Rango IQ                         69.60              239.64             8.61
1q                               14.88               22.07            19.83
2q                               43.69              104.90            23.70
3q                               84.48              261.72            28.45
2d                                4.03                4.28            18.83
9d                              159.53              489.02            35.03
Skewness                          3.07                2.72             3.21
Curtosis                         18.47               14.07            29.47
                    consumo_total_dom consumo_prom_no_dom consumo_total_no_dom
Máximo                       33044.02            16837.38             40728.16
Mínimo                           0.00                0.00                 0.00
Media                         1665.81               99.17               465.41
Mediana                       1207.49               26.20               144.74
Varianza                   3282194.46           289442.06           2085536.22
Desviación Estándar           1811.68              538.00              1444.14
Rango IQ                      1605.90               45.03               336.40
1q                             576.46               13.04                48.08
2q                            1207.49               26.20               144.74
3q                            2182.36               58.07               384.48
2d                             463.29               10.94                35.72
9d                            3580.22              137.15               940.72
Skewness                         4.72               19.71                12.34
Curtosis                        54.28              494.23               237.74
                    consumo_prom consumo_total
Máximo                  16837.38      40728.16
Mínimo                      0.00          0.00
Media                      73.39       2278.08
Mediana                    27.38       1683.36
Varianza               270236.00    5664797.83
Desviación Estándar       519.84       2380.08
Rango IQ                   12.77       1999.04
1q                         22.39        905.09
2q                         27.38       1683.36
3q                         35.16       2904.13
2d                         21.29        757.95
9d                         53.45       4568.32
Skewness                   21.77          4.81
Curtosis                  570.23         48.94</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alcaldía = Benito Juarez, Atributo = Consumo Promedio</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>BENITO <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, )</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>BENITO_OUT <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, bimestre <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(consumo_prom <span class="sc">&gt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(colonia) <span class="sc">%&gt;%</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="co">#%&gt;%</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>              <span class="co">#mutate(prop =  paste(round(100*prop.table(n), 2), "%", sep=""))   </span></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>aa1 <span class="ot">&lt;-</span> BENITO <span class="sc">%&gt;%</span></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_prom, <span class="at">fill=</span>indice_des)) <span class="sc">+</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-27"><a href="#cb43-27" aria-hidden="true" tabindex="-1"></a>aa1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>aa2 <span class="ot">&lt;-</span> BENITO  <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>consumo_prom, <span class="at">fill=</span>indice_des)) <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot"</span>, </span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>aa2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>aa3 <span class="ot">&lt;-</span> BENITO <span class="sc">%&gt;%</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> consumo_prom, <span class="at">fill =</span> indice_des)) <span class="sc">+</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>indice_des) <span class="sc">+</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Indice Desarrollo"</span>))<span class="sc">+</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>aa3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la libreria cowplot</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>consumo_prom_gr <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>( aa1, aa2, aa3)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>consumo_prom_gr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="principales-inferencias-de-la-información" class="level3">
<h3 class="anchored" data-anchor-id="principales-inferencias-de-la-información">Principales inferencias de la información</h3>
<section id="interpretación-de-los-datos." class="level4">
<h4 class="anchored" data-anchor-id="interpretación-de-los-datos.">Interpretación de los datos.</h4>
<p>Por Alcaldía, las tablas de frecuencia muestran un comportamiento similar por cada bimestre e índice de desarrollo. Podemos observar que el sector con índice de desarrollo bajo es el que presenta mayor consumo por metro cúbico que es consistente en cada bimestre, siguiéndolo los sectores alto y popular, mientras que el sector medio es el que presenta menores consumos por metro cúbico.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>graf_id</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>También podemos observar en los gráficos por bimestre del consumo total, que los datos se distribuyen de manera similar, con sesgo a la izquierda y con una mediana, media y desviación parecida en cada bimestre.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>consumo_total_gr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df.medidas.ct</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                        totales bimestre 1 bimestre 2 bimestre 3
Máximo                119726.94    2998.75    2999.70    2999.91
Mínimo                     0.00       0.00       0.00       0.00
Media                   1697.90     875.00     897.65     899.42
Mediana                  897.16     732.06     756.78     758.84
Varianza            12670925.64  544759.93  559955.50  563425.77
Desviación Estándar     3559.62     738.08     748.30     750.62
Rango IQ                1468.01    1045.94    1084.73    1083.61
1q                       342.67     258.19     265.70     265.34
2q                       897.16     732.06     756.78     758.84
3q                      1810.68    1304.13    1350.43    1348.94
2d                       221.16     151.69     158.71     158.00
9d                      3645.84    1980.02    2022.46    2030.47
Skewness                  10.99       0.83       0.78       0.78
Curtosis                 198.56       2.96       2.84       2.83</code></pre>
</div>
</div>
<p><strong>Análisis de las distribuciones por alcaldía</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df.consumo.clean<span class="sc">$</span>alcaldia)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "ALVARO OBREGON"         "AZCAPOTZALCO"           "BENITO JUAREZ"         
 [4] "COYOACAN"               "CUAJIMALPA DE MORELOS"  "CUAUHTEMOC"            
 [7] "GUSTAVO A. MADERO"      "IZTACALCO"              "IZTAPALAPA"            
[10] "LA MAGDALENA CONTRERAS" "MIGUEL HIDALGO"         "MILPA ALTA"            
[13] "TLAHUAC"                "TLALPAN"                "VENUSTIANO CARRANZA"   
[16] "XOCHIMILCO"            </code></pre>
</div>
</div>
<p>Se puede observar en la mayoría de las distribuciones de las alcaldías, que los datos de consumo de agua se encuentran en un rango que va desde 0 a 4000 cuando son consumos totales de agua en metros cúbicos en todos los sectores de desarrollo socioeconómico. Mientras que presentan un consumo promedio que se centra en un rango de 0 a 100 metros cúbicos de agua.</p>
<p>Por otra parte, el conjunto de observaciones que tiene más frecuencia en su consumo total de agua se encuentra en el sector con índice de desarrollo bajo y en el popular en la mayoría de las alcaldías, con algunas excepciones como Benito Juárez, Cuajimalpa, y Coyoacán donde el sector con índice de desarrollo alto también contiene la mayoría de los consumos totales. Mientras que en el consumo promedio los sectores con índice de desarrollo bajo y popular representan el conjunto más significativo de los datos.</p>
<p>Todas las distribuciones están sesgadas a la izquierda, tanto de consumo total como promedio en cada alcaldía. Los datos atípicos contienen valores en el último decil con cantidades considerablemente grandes, por lo que se decidió eliminarlos del análisis.</p>
</section>
</section>
</section>
<section id="registro-histórico-de-reportes-de-fugas-2018---2022" class="level2">
<h2 class="anchored" data-anchor-id="registro-histórico-de-reportes-de-fugas-2018---2022">Registro Histórico de Reportes de Fugas 2018 - 2022</h2>
<section id="preprocesamiento-de-datos-1" class="level3">
<h3 class="anchored" data-anchor-id="preprocesamiento-de-datos-1">Preprocesamiento de Datos</h3>
<p><strong>Descripción inicial de los atributos de los datos</strong></p>
<p>Este conjunto de datos muestra información diaria referente a reportes realizados por ciudadanos usuarios del servicio de agua potable de al CDMX.</p>
<p>Datos obtenidos de: https://datos.cdmx.gob.mx/dataset/reportes-de-agua</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clase de dataframe </span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensión del dataframe </span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 254730     10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeras filas. </span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          folio tipo_de_falla quien_atiende  latitud  longitud codigo_postal
1 20210405-0030 Falta de agua      Poniente 19.37893 -99.19193          1420
2 20210428-0107 Falta de agua      Poniente 19.34262 -99.21888          1780
3 20210428-0184 Falta de agua      Poniente 19.34289 -99.21800            NA
4 20210429-0075 Falta de agua      Poniente 19.34262 -99.21888          1780
5 20210429-0157 Falta de agua      Poniente 19.34283 -99.21798          1780
6 20210407-0159 Falta de agua      Poniente 19.37642 -99.21027          1410
       fecha       colonia_registro_sacmex        colonia_datos_abiertos
1 2021-04-05                  Alfonso XIII          SANTA MARIA NONOALCO
2 2021-04-28          Olivar de los Padres LOMAS DE LOS ANGELES TETELPAN
3 2021-04-28 Lomas de los Ángeles Tetelpan LOMAS DE LOS ANGELES TETELPAN
4 2021-04-29          Olivar de los Padres LOMAS DE LOS ANGELES TETELPAN
5 2021-04-29 Lomas de los Ángeles Tetelpan LOMAS DE LOS ANGELES TETELPAN
6 2021-04-07              Ciudad de México                  BARRIO NORTE
        alcaldia
1 ALVARO OBREGON
2 ALVARO OBREGON
3 ALVARO OBREGON
4 ALVARO OBREGON
5 ALVARO OBREGON
6 ALVARO OBREGON</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de los dataframe </span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>(<span class="fu">str</span>(df.fugas))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   254730 obs. of  10 variables:
 $ folio                  : chr  "20210405-0030" "20210428-0107" "20210428-0184" "20210429-0075" ...
 $ tipo_de_falla          : chr  "Falta de agua" "Falta de agua" "Falta de agua" "Falta de agua" ...
 $ quien_atiende          : chr  "Poniente" "Poniente" "Poniente" "Poniente" ...
 $ latitud                : num  19.4 19.3 19.3 19.3 19.3 ...
 $ longitud               : num  -99.2 -99.2 -99.2 -99.2 -99.2 ...
 $ codigo_postal          : int  1420 1780 NA 1780 1780 1410 1700 1296 1296 1296 ...
 $ fecha                  : chr  "2021-04-05" "2021-04-28" "2021-04-28" "2021-04-29" ...
 $ colonia_registro_sacmex: chr  "Alfonso XIII" "Olivar de los Padres" "Lomas de los Ángeles Tetelpan" "Olivar de los Padres" ...
 $ colonia_datos_abiertos : chr  "SANTA MARIA NONOALCO" "LOMAS DE LOS ANGELES TETELPAN" "LOMAS DE LOS ANGELES TETELPAN" "LOMAS DE LOS ANGELES TETELPAN" ...
 $ alcaldia               : chr  "ALVARO OBREGON" "ALVARO OBREGON" "ALVARO OBREGON" "ALVARO OBREGON" ...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Acomodamos las filas </span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas[, <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)]</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de las columnas </span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "fecha"                   "folio"                  
 [3] "tipo_de_falla"           "quien_atiende"          
 [5] "latitud"                 "longitud"               
 [7] "codigo_postal"           "colonia_registro_sacmex"
 [9] "colonia_datos_abiertos"  "alcaldia"               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    fecha              folio           tipo_de_falla      quien_atiende     
 Length:254730      Length:254730      Length:254730      Length:254730     
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
    latitud          longitud       codigo_postal    colonia_registro_sacmex
 Min.   :-51.50   Min.   :-122.71   Min.   :     0   Length:254730          
 1st Qu.: 19.32   1st Qu.: -99.19   1st Qu.:  3300   Class :character       
 Median : 19.37   Median : -99.15   Median :  6700   Mode  :character       
 Mean   : 19.30   Mean   : -98.65   Mean   :  7368                          
 3rd Qu.: 19.42   3rd Qu.: -99.12   3rd Qu.: 10900                          
 Max.   : 65.42   Max.   : 117.12   Max.   :209191                          
                                    NA's   :15754                           
 colonia_datos_abiertos   alcaldia        
 Length:254730          Length:254730     
 Class :character       Class :character  
 Mode  :character       Mode  :character  
                                          
                                          
                                          
                                          </code></pre>
</div>
</div>
<p>Podemos notar que existen 10 columnas con la siguiente información:</p>
<ol type="1">
<li>fecha</li>
<li>folio</li>
<li>tipo_de_falla</li>
<li>quien_atiende</li>
<li>latitud</li>
<li>longitud</li>
<li>codigo_postal</li>
<li>colonia_registro_sacmex</li>
<li>colonia_datos_abiertos</li>
<li>alcaldia</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna fecha</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha =</span> <span class="fu">as.Date</span>(fecha))</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna codigo_postal</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas <span class="sc">%&gt;%</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">codigo_postal =</span> <span class="fu">as.character</span>(codigo_postal))</span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>(df.fugas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     fecha               folio           tipo_de_falla      quien_atiende     
 Min.   :2018-01-01   Length:254730      Length:254730      Length:254730     
 1st Qu.:2018-12-03   Class :character   Class :character   Class :character  
 Median :2019-10-30   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2020-01-07                                                           
 3rd Qu.:2021-03-19                                                           
 Max.   :2021-12-31                                                           
    latitud          longitud       codigo_postal      colonia_registro_sacmex
 Min.   :-51.50   Min.   :-122.71   Length:254730      Length:254730          
 1st Qu.: 19.32   1st Qu.: -99.19   Class :character   Class :character       
 Median : 19.37   Median : -99.15   Mode  :character   Mode  :character       
 Mean   : 19.30   Mean   : -98.65                                             
 3rd Qu.: 19.42   3rd Qu.: -99.12                                             
 Max.   : 65.42   Max.   : 117.12                                             
 colonia_datos_abiertos   alcaldia        
 Length:254730          Length:254730     
 Class :character       Class :character  
 Mode  :character       Mode  :character  
                                          
                                          
                                          </code></pre>
</div>
</div>
<p><strong>Análisis de Datos Nulos</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          NA.
fecha                       0
folio                       0
tipo_de_falla               5
quien_atiende             146
latitud                     0
longitud                    0
codigo_postal           15754
colonia_registro_sacmex   654
colonia_datos_abiertos   4120
alcaldia                 4120</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de alcaldía </span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>df.fugas.alcaldia <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.fugas<span class="sc">$</span>alcaldia)</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>df.fugas.clean <span class="ot">&lt;-</span> df.fugas[df.fugas.alcaldia,]</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          NA.
fecha                       0
folio                       0
tipo_de_falla               5
quien_atiende             145
latitud                     0
longitud                    0
codigo_postal           14669
colonia_registro_sacmex     0
colonia_datos_abiertos      0
alcaldia                    0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de tipo de falla </span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>df.fugas.tf <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>df.fugas.clean <span class="ot">&lt;-</span> df.fugas.clean[df.fugas.tf,]</span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                          NA.
fecha                       0
folio                       0
tipo_de_falla               0
quien_atiende             145
latitud                     0
longitud                    0
codigo_postal           14668
colonia_registro_sacmex     0
colonia_datos_abiertos      0
alcaldia                    0</code></pre>
</div>
</div>
</section>
<section id="análisis-exploratorio-1" class="level3">
<h3 class="anchored" data-anchor-id="análisis-exploratorio-1">Análisis Exploratorio</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.fugas.clean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     fecha               folio           tipo_de_falla      quien_atiende     
 Min.   :2018-01-01   Length:250605      Length:250605      Length:250605     
 1st Qu.:2018-12-04   Class :character   Class :character   Class :character  
 Median :2019-10-31   Mode  :character   Mode  :character   Mode  :character  
 Mean   :2020-01-08                                                           
 3rd Qu.:2021-03-20                                                           
 Max.   :2021-12-31                                                           
    latitud         longitud      codigo_postal      colonia_registro_sacmex
 Min.   :19.13   Min.   :-99.34   Length:250605      Length:250605          
 1st Qu.:19.32   1st Qu.:-99.19   Class :character   Class :character       
 Median :19.37   Median :-99.15   Mode  :character   Mode  :character       
 Mean   :19.37   Mean   :-99.15                                             
 3rd Qu.:19.42   3rd Qu.:-99.12                                             
 Max.   :19.58   Max.   :-98.95                                             
 colonia_datos_abiertos   alcaldia        
 Length:250605          Length:250605     
 Class :character       Class :character  
 Mode  :character       Mode  :character  
                                          
                                          
                                          </code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar tipo de dato character a factor </span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>tipo_de_falla  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>quien_atiende  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>quien_atiende)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>alcaldia  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>alcaldia)</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Falta de agua" "Fuga"          "Mala calidad" </code></pre>
</div>
</div>
</section>
<section id="análisis-de-la-distribución-de-los-datos.-1" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-la-distribución-de-los-datos.-1">Análisis de la distribución de los datos.</h3>
<p><strong>Análisis de las categorías de los datos.</strong></p>
<p>Tablas de Frecuencias y Gráficos de Barras para las columnas Tipos de Falla y Alcaldía</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de Frecuencias Absolutas, Relativas</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>freq_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">group_by</span>(alcaldia, tipo_de_falla) <span class="sc">%&gt;%</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'alcaldia'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de Frecuencias absolutas</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>graf_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> alcaldia, <span class="at">fill =</span> tipo_de_falla)) <span class="sc">+</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>           <span class="co">#facet_wrap(~tipo_de_falla)+</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Reportes por Tipo de Falla"</span>, </span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">subtitle =</span> <span class="st">"Por alcaldía. 2018-2022"</span>,</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> <span class="st">"Alcaldia"</span>,</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>graf_tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="distribuciones-1" class="level3">
<h3 class="anchored" data-anchor-id="distribuciones-1">Distribuciones</h3>
<p>Mostrando los datos convertidos a un dataframe por día, donde se incluye una columna que es el conteo de las fallas de agua por alcaldía.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla por alcaldía y por día</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>BENITO_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(fecha, alcaldia, folio, tipo_de_falla) <span class="sc">%&gt;%</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>               <span class="fu">group_by</span>(fecha) <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>               <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>aa1tf <span class="ot">&lt;-</span> BENITO_tf  <span class="sc">%&gt;%</span></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(count)) <span class="sc">+</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>aa1tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>aa2tf <span class="ot">&lt;-</span> BENITO_tf  <span class="sc">%&gt;%</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>count)) <span class="sc">+</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot"</span>, </span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>aa2tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-29-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>aa3tf <span class="ot">&lt;-</span> BENITO_tf <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> count)) <span class="sc">+</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Reportes de Fallas"</span>))<span class="sc">+</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>aa3tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-29-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfica de Dispersión </span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>aa4tf <span class="ot">&lt;-</span> BENITO_tf <span class="sc">%&gt;%</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y=</span> count)) <span class="sc">+</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Reportes de Fallas"</span>))<span class="sc">+</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Serie de Tiempo"</span>, </span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Tiempo: días"</span>,</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Reportes de Fallas"</span>)<span class="sc">+</span> </span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>aa4tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-29-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la librería cowplot</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>completo <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>( aa1tf, aa2tf, aa3tf, aa4tf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Medidas de Tendencia Central y Dispersión</strong></p>
<p>Columnas numéricas: count</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>df.medidas.tf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Medidas =</span> <span class="fu">calcular_medidas</span>(BENITO_tf, <span class="dv">2</span>), </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>df.medidas.tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                    Medidas
Máximo               193.00
Mínimo                 1.00
Media                 21.12
Mediana               13.00
Varianza             599.49
Desviación Estándar   24.48
Rango IQ              22.00
1q                     5.00
2q                    13.00
3q                    27.00
2d                     4.00
9d                    48.00
Skewness               2.64
Curtosis              12.30</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers </span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>BENITO_OUT_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(fecha, tipo_de_falla, quien_atiende, colonia_datos_abiertos) <span class="sc">%&gt;%</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>BENITO_OUT_tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 5
   fecha      tipo_de_falla quien_atiende colonia_datos_abiertos  count
   &lt;date&gt;     &lt;fct&gt;         &lt;fct&gt;         &lt;chr&gt;                   &lt;int&gt;
 1 2018-10-19 Falta de agua Centro Pascua NONOALCO                   61
 2 2019-04-05 Falta de agua Centro Pascua NARVARTE V                 52
 3 2019-09-19 Falta de agua Centro Pascua NAPOLES                    56
 4 2019-09-20 Falta de agua Centro Pascua NAPOLES                    55
 5 2021-02-25 Falta de agua Centro Pascua NATIVITAS                  62
 6 2021-02-25 Falta de agua Centro Pascua VILLA DE CORTES            52
 7 2021-03-03 Falta de agua Centro Pascua LETRAN VALLE               66
 8 2021-09-28 Falta de agua Centro Pascua INSURGENTES MIXCOAC        53
 9 2021-10-16 Falta de agua Centro Pascua MODERNA                    51
10 2021-11-16 Falta de agua Centro Pascua SAN PEDRO DE LOS  PINOS    63</code></pre>
</div>
</div>
</section>
<section id="principales-inferencias-de-la-información-1" class="level3">
<h3 class="anchored" data-anchor-id="principales-inferencias-de-la-información-1">Principales inferencias de la información</h3>
<p>Interpretación y Conclusiones</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>graf_tf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>completo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de las alcaldías, podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad.</p>
<p>Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales no se encuentran tan alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes fueron por de falta de agua.</p>
<p>Álvaro Obregón</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad.</p>
<p>Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales no se encuentran tan alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes fueron por de falta de agua.</p>
<p>Azcapotzalco</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola muy pronunciada a la derecha, lo que vemos en la gráfica de densidad. Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que en esta alcaldía no tenemos valores atípicos. Lo que nos indica que aunque sí hay fallas, no hay una inclunación irregular hacia una sola una. Pudiendo concluir que se tiene un funcionamiento regular.</p>
<p>Benito Juárez</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad. Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos bastantes valores atípicos en nuestra distribución, los cuales se encuentran muy alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que todos los reportes fueron por falta de agua.</p>
<p>Coyoacán</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una ligera cola hacia la derecha, lo que vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales se encuentran un poco alejados de nuestro decil 9. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes recibidos fueron por falta de agua.</p>
<p>Cuajimalpa de Morelos</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una pequeña cola hacia la derecha, lo que vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja notamos que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</p>
<p>Cuauhtémoc</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha bastante pronunciada, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja notamos que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</p>
<p>Gustavo A. Madero</p>
<p>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución.Aunque estos outliers no están tan alejados de nustros datos centrales, nos indican que la falla predominante en esta alcaldía es la falta de agua.</p>
<p>Iztacalco</p>
<p>Al revisar los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</p>
<p>Iztapalapa</p>
<p>Se puede observar que la mayoría de los reportes de fallas se deben a falta de agua, sin embargo, una parte importante de los reportes se debe también a las fugas, prácticamente no se llevan a cabo reportes de mala calidad del agua. Podemos notar un importante aumento de reportes en el mes de septiembre del 2018, posteriormente, vemos picos de actividad, sin embargo, la tendencia es decreciente.</p>
<p>Magdalena Contreras</p>
<p>En esta alcaldía podemos observar que la cantidad de reportes es mucho menor en general, sin embargo, como en las demás alcaldías, la mayor parte de reportes se debe a falta de agua. A diferencia de la mayoría de las otras alcaldías, podemos ver que un incremento importante se realizó en julio del 2019, fecha atípica en las demás alcaldías.</p>
<p>Miguel Hidalgo</p>
<p>La distribución de los reportes por fugas de agua en esta alcaldía es una distribución un poco mas normal que en el resto, se pueden ver picos importantes en marzo del 2019 y en enero del 2020 Milpalta Es la alcaldía donde se presentan menos reportes de fallas en el suministro de agua, esto podría deberse a que gran parte es zona rural, no se comporta de manera normal, y presenta muchos valores atípicos.</p>
<p>Tlahuac</p>
<p>En esta alcaldía la distribución es parecida a la alcaldía de Milpalta, ambas son zonas rurales, sin embargo, se presentaron muchos mas reportes, la mayor parte de los datos se presentan en el primer semestre del 2019.</p>
<p>Tlalpan</p>
<p>En esta alcaldía la distribución no se presenta de manera normal, hay una gran variación de los datos y no son uniformes, se observan muchos datos atípicos, hay bastantes reportes esto podría ser porque es una alcaldía con alta densidad poblacional.</p>
<p>Venustiano Carranza</p>
<p>Podemos observar que los datos en esta alcaldía no son uniformes, la distribución nos dice que la mayor parte de los eventos son por falta de agua y varían de manera importante de mes a mes, se observan valores atípicos de manera constante.</p>
<p>Xochimilco</p>
<p>Se observa una cola hacia la izquierda, indicando que la mayoría de los reportes realizados se llevan a cabo para reportar falta del suministro de agua potable y los reportes se agrupa la mayoría a la izquierda y disminuye la incidencia a lo largo&nbsp;del&nbsp;tiempo.</p>
</section>
</section>
<section id="metodología-del-modelo" class="level2">
<h2 class="anchored" data-anchor-id="metodología-del-modelo">Metodología del Modelo</h2>
<p><strong>Librerías</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'quantmod':
  method            from
  as.zoo.data.frame zoo </code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stats)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a><span class="co">#list.files()</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Lectura de la base, y agrupación por fecha.</strong></p>
<p>Se decidió utilizar los datos hasta el 01-12-2021, y dejar el mes de diciembre de 2021 para probar el modelo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lectura de archivo</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>agua_cdmx<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/reportes_agua_hist.csv'</span>)</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="ot">&lt;-</span> agua_cdmx <span class="sc">%&gt;%</span> <span class="fu">select</span>(fecha) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fecha ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">reportes=</span><span class="fu">n</span>())</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="sc">$</span>fecha<span class="ot">&lt;-</span> <span class="fu">as.Date</span>(agua_serie<span class="sc">$</span>fecha)</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="co">#esta base nos ayudara a comprobar una vez validado el modelo</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>serie_comprobadora<span class="ot">&lt;-</span>agua_serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fecha<span class="sc">&gt;=</span><span class="st">"2021-12-01"</span>)</span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Filtramos la fecha y graficamos</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="ot">&lt;-</span>agua_serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fecha<span class="sc">&lt;</span><span class="st">"2021-12-01"</span>)</span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(agua_serie, <span class="fu">aes</span>(<span class="at">x=</span>fecha,<span class="at">y =</span> reportes)) <span class="sc">+</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Serie de tiempo</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos la serie de tiempo</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>serie_agua<span class="ot">&lt;-</span><span class="fu">ts</span>(agua_serie,<span class="at">frequency=</span><span class="dv">365</span>, <span class="at">start=</span><span class="fu">c</span>(<span class="dv">2018</span>, <span class="dv">1</span>))</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="fu">decompose</span>(serie_agua[,<span class="dv">2</span>]) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(serie_agua[,<span class="dv">2</span>], <span class="at">alternative =</span> <span class="st">"stationary"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in adf.test(serie_agua[, 2], alternative = "stationary"): p-value
smaller than printed p-value</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  serie_agua[, 2]
Dickey-Fuller = -4.5606, Lag order = 11, p-value = 0.01
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p><em>Contraste de hipótesis:</em></p>
<ul>
<li><p>H0: No estacionaria</p></li>
<li><p>H1: Estacionaria</p></li>
</ul>
<p>Tras realizar la prueba aumentada de Dickey-Fuller (ADF), obtenemos un p-valor = 0.01.</p>
<p>Como el <strong>p-valor &lt; 0.05</strong>, rechazamos H0, la serie es estacionaria.</p>
<p><strong>Realizando la prueba de autocorrelación podemos ver que la serie no tiene una caída exponencial</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(serie_agua[,<span class="dv">2</span>])) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-37-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Aunque la serie presenta de origen estacionariedad, probamos corriendo la función ndiffs(), para verificar si es necesario aplicar alguna diferencia al momento de correr el modelo.</p>
<p>La función ndiffs nos muestra que la serie debería tener 1 diferencia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ndiffs</span>(serie_agua[,<span class="dv">2</span>]) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><em>A partir de este gráfico podemos ver que ya se crea un cambio exponencial en la autocorrelación.</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(<span class="fu">diff</span>(serie_agua[,<span class="dv">2</span>]))) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-39-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Por ello aplicaremos “Una diferencia” para trabajar el modelo y observamos graficamente como se comporta la serie.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>d1_agua<span class="ot">&lt;-</span><span class="fu">diff</span>(serie_agua[,<span class="dv">2</span>])</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(d1_agua)  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Corroboramos estacionaridad.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(d1_agua,<span class="at">alternative=</span><span class="st">"stationary"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in adf.test(d1_agua, alternative = "stationary"): p-value smaller than
printed p-value</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Augmented Dickey-Fuller Test

data:  d1_agua
Dickey-Fuller = -17.069, Lag order = 11, p-value = 0.01
alternative hypothesis: stationary</code></pre>
</div>
</div>
<p>Como podemos ver en el gráfico ahora la distribución se ajusta a una media cero, con un comportamiento aleatorio. Esto se corrobora de nuevo con la prueba Dicky-Fuller Aumentada donde el P-value = 0.01, por ende P-value &lt; 0.05, se afirma la estacionariedad para trabajar en la seri.e</p>
<p>EL valor a usar de “d” sera igual a 1.</p>
<p><strong>MA</strong></p>
<p>Para encontrar los valores que ocuparan los parámetros para p y q del Modelo, aplicaremos las pruebas de autocorrelación y autocorrelación parcial, esta prueba la aplicaremos a la serie generada con una diferencia.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(d1_agua))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-42-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Como vemos en el gráfico el lag 2 es el que sobre sale, así como el lag 3 # q = 2 , 3</p>
<p><strong>AR</strong></p>
<p>Aplicaremos la prueba de correlación parcial para obtener en número de AR(Auto regresivos) a usar en el modelo.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">pacf</span>(d1_agua))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>En el gráfico obtenido observamos que los lags posibles son para p:</p>
<p>p=2,3,4,5</p>
<p><strong>ARIMA(p,d,q)</strong></p>
<p>De acuerdo a los valores obtenidos previamente se plantean los siguientes modelos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 1 (2,1,2)</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>m1<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>m1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(2, 1, 2))

Coefficients:
         ar1      ar2      ma1     ma2
      1.0405  -0.6017  -1.3666  0.5312
s.e.  0.0424   0.0373   0.0413  0.0471

sigma^2 estimated as 6458:  log likelihood = -8296.67,  aic = 16603.34</code></pre>
</div>
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>bx_m1<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m1),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 2 (3,1,2)</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>m2<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>m2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(3, 1, 2))

Coefficients:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(diag(x$var.coef)): Se han producido NaNs</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>        ar1     ar2      ar3      ma1      ma2
      0.131  -0.024  -0.1377  -0.4361  -0.4025
s.e.    NaN     NaN      NaN      NaN      NaN

sigma^2 estimated as 6583:  log likelihood = -8310.34,  aic = 16632.68</code></pre>
</div>
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>bx_m2<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m2),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 3 (4,1,2)</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>m3<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>m3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(4, 1, 2))

Coefficients:
         ar1      ar2     ar3      ar4      ma1     ma2
      0.7719  -0.8989  0.1448  -0.4841  -1.1169  0.8427
s.e.  0.0286   0.0326  0.0312   0.0255   0.0219  0.0226

sigma^2 estimated as 5305:  log likelihood = -8157.27,  aic = 16328.54</code></pre>
</div>
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>bx_m3<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m3),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 4 (5,1,2)</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>m4<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>m4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(5, 1, 2))

Coefficients:
         ar1      ar2      ar3      ar4      ar5      ma1     ma2
      0.1691  -0.7161  -0.2659  -0.2935  -0.5098  -0.5543  0.4982
s.e.  0.0462   0.0278   0.0333   0.0228   0.0303   0.0540  0.0357

sigma^2 estimated as 4808:  log likelihood = -8086.66,  aic = 16189.31</code></pre>
</div>
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>bx_m4<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m4),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 5 (2,1,3)</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>m5<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>m5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(2, 1, 3))

Coefficients:
          ar1      ar2     ma1      ma2      ma3
      -0.3632  -0.3940  0.0473  -0.1943  -0.5735
s.e.   0.0455   0.0606  0.0403   0.0574   0.0349

sigma^2 estimated as 6454:  log likelihood = -8296.35,  aic = 16604.7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>bx_m5<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m5),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 6 (3,1,3)</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>m6<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>m6</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(3, 1, 3))

Coefficients:
         ar1      ar2     ar3      ma1     ma2      ma3
      0.1443  -0.7299  0.5853  -0.4696  0.4961  -0.9009
s.e.  0.0275   0.0122  0.0276   0.0231  0.0295   0.0159

sigma^2 estimated as 5707:  log likelihood = -8209.57,  aic = 16433.14</code></pre>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>bx_m6<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m6),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 7 (4,1,3)</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>m7<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a>m7</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(4, 1, 3))

Coefficients:
         ar1      ar2     ar3      ar4      ma1     ma2      ma3
      0.9431  -1.1326  0.3554  -0.4835  -1.3507  1.1564  -0.3498
s.e.  0.0422   0.0434  0.0411   0.0301   0.0473  0.0520   0.0443

sigma^2 estimated as 5107:  log likelihood = -8129.84,  aic = 16275.69</code></pre>
</div>
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>bx_m7<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m7),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 8 (5,1,3)</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>m8<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>m8</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
arima(x = serie_agua[, 2], order = c(5, 1, 3))

Coefficients:
         ar1      ar2      ar3      ar4      ar5      ma1     ma2      ma3
      0.0228  -0.8229  -0.0409  -0.2437  -0.4725  -0.2938  0.5876  -0.5823
s.e.  0.0308   0.0257   0.0442   0.0242   0.0284   0.0302  0.0191   0.0391

sigma^2 estimated as 4652:  log likelihood = -8063.68,  aic = 16145.37</code></pre>
</div>
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>bx_m8<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m8),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla Modelos</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>modelos_p<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="st">"ARIMA"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Modelo 1 (2,1,2)"</span>,<span class="st">"Modelo 2 (3,1,2)"</span>,</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo 3 (4,1,2)"</span>,<span class="st">"Modelo 4 (5,1,2)"</span>,<span class="st">"Modelo 5 (2,1,3)"</span>,</span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo 6 (3,1,3)"</span>,<span class="st">"Modelo 7 (4,1,3)"</span>,<span class="st">"Modelo 8 (5,1,3)"</span>),</span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"AIC"</span> <span class="ot">=</span> <span class="fu">c</span>(m1<span class="sc">$</span>aic,m2<span class="sc">$</span>aic,m3<span class="sc">$</span>aic,m4<span class="sc">$</span>aic,m5<span class="sc">$</span>aic,m6<span class="sc">$</span>aic,m7<span class="sc">$</span>aic,m8<span class="sc">$</span>aic),</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"p_value_Ljunk_Box"</span><span class="ot">=</span><span class="fu">c</span>(bx_m1<span class="sc">$</span>p.value, bx_m2<span class="sc">$</span>p.value, bx_m3<span class="sc">$</span>p.value,</span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>                                            bx_m4<span class="sc">$</span>p.value, bx_m5<span class="sc">$</span>p.value, bx_m6<span class="sc">$</span>p.value,</span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>                                            bx_m7<span class="sc">$</span>p.value, bx_m8<span class="sc">$</span>p.value)</span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>                      )</span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>modelos_p<span class="ot">&lt;-</span> modelos_p <span class="sc">%&gt;%</span> </span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="st">"p_value&gt;0.05"</span> <span class="ot">=</span> <span class="fu">ifelse</span>(p_value_Ljunk_Box <span class="sc">&gt;</span><span class="fl">0.05</span>,<span class="st">"VERDADERO"</span> ,<span class="st">"FALSO"</span>))</span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true" tabindex="-1"></a>modelos_p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             ARIMA      AIC p_value_Ljunk_Box p_value&gt;0.05
1 Modelo 1 (2,1,2) 16603.34    0.652486880643    VERDADERO
2 Modelo 2 (3,1,2) 16632.68    0.752247113649    VERDADERO
3 Modelo 3 (4,1,2) 16328.54    0.000913523318        FALSO
4 Modelo 4 (5,1,2) 16189.31    0.752206415663    VERDADERO
5 Modelo 5 (2,1,3) 16604.70    0.121864058962    VERDADERO
6 Modelo 6 (3,1,3) 16433.14    0.000008505459        FALSO
7 Modelo 7 (4,1,3) 16275.69    0.472650491993    VERDADERO
8 Modelo 8 (5,1,3) 16145.37    0.040526637827        FALSO</code></pre>
</div>
</div>
<p><em>La tabla nos muestra los valores AIC y el p_value de la prueba Ljung-Box</em>.</p>
<p>Donde el modelo 4 y 8 presenta los valores mas pequeños para el AIC, pero si revisamos los residuales de donde nace el P_value de la prueba Ljunk Box, vemos que en el modelo 8 el p-value es menor a 0.05 por lo que se muestra que existe autocorrelación en los residuos</p>
<p>Para validar si los residuos se distribuyen de forma normal, se aplica el test de normalidad Shapiro-Wilk, que es una prueba estadística utilizada para evaluar si una muestra de datos sigue una distribución normal.</p>
<p>Las hipótesis nula y alternativa del test de Shapiro-Wilk son las siguientes:</p>
<ul>
<li><p><strong>H0: Los residuos siguen una distribución normal.</strong></p></li>
<li><p><strong>H1: Los residuos NO siguen una distribución normal.</strong></p></li>
</ul>
<p>El <strong>valor p es menor que un nivel de significancia de 0.05, se puede rechazar la hipótesis nula</strong> y concluir que la muestra no sigue una distribución normal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(m4<span class="sc">$</span>residuals)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Shapiro-Wilk normality test

data:  m4$residuals
W = 0.93596, p-value &lt; 0.00000000000000022</code></pre>
</div>
</div>
<p>Los errores se mueven alrededor de una media = 0</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">residuals</span>(m4))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Los valores son normales ya que descansan en una línea y no están por todos lados</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a>errores<span class="ot">&lt;-</span><span class="fu">residuals</span>(m4)</span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(errores)</span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(errores,<span class="at">col=</span><span class="st">"red"</span>,<span class="at">lwd=</span><span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Una vez elegido el mejor modelo procedemos a crear nuestro pronóstico</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>pronostico<span class="ot">&lt;-</span><span class="fu">forecast</span>(m4, <span class="at">h=</span><span class="dv">31</span>, <span class="at">level =</span> <span class="dv">95</span>)</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pronostico)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pronostico<span class="sc">$</span>mean, <span class="at">col=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>upper),<span class="at">col=</span><span class="st">"green"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>upper))<span class="sc">+</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>lower),<span class="at">col=</span><span class="st">"green"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>lower))<span class="sc">+</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>serie_comprobadora<span class="sc">$</span>reportes),<span class="at">col=</span><span class="st">"red"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>serie_comprobadora<span class="sc">$</span>reportes))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Proyecto-Equipo-24---Consumo-de-Agua-CDMX-Completo_files/figure-html/unnamed-chunk-48-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="resultados-shiny" class="level3">
<h3 class="anchored" data-anchor-id="resultados-shiny">Resultados Shiny</h3>
<p>Link al Cloud para ver la aplicación Shiny.</p>
</section>
</section>
<section id="conclusiones" class="level2">
<h2 class="anchored" data-anchor-id="conclusiones">Conclusiones</h2>
<p>Interpretación de los resultados del modelo</p>
</section>
<section id="referencias" class="level2">
<h2 class="anchored" data-anchor-id="referencias">Referencias</h2>
<ul>
<li><p>Limache Sandoval, E. M. (2021). Modelo ARIMA sobre el consumo de agua de uso poblacional en la ciudad de Tacna.&nbsp;<em>REVISTA VERITAS ET SCIENTIA - UPT</em>,&nbsp;<em>10</em>(1), 69–82. https://doi.org/10.47796/ves.v10i1.461</p></li>
<li><p>Datos Abiertos: Consumo de agua. SACMEX <a href="https://datos.cdmx.gob.mx/sv/dataset/consumo-agua" class="uri">https://datos.cdmx.gob.mx/sv/dataset/consumo-agua</a></p></li>
<li><p>Datos Abiertos: Reportes de agua. SACMEX <a href="https://datos.cdmx.gob.mx/dataset/reportes-de-agua" class="uri">https://datos.cdmx.gob.mx/dataset/reportes-de-agua</a></p></li>
</ul>
</section>
<section id="integrantes" class="level2">
<h2 class="anchored" data-anchor-id="integrantes">Integrantes:</h2>
<ul>
<li><p>Diego Rosales</p></li>
<li><p>Carlos Guerra</p></li>
<li><p>Jorge Limas</p></li>
<li><p>Pedro García</p></li>
<li><p>Alexis Leal</p></li>
<li><p>Taryn Galindo</p></li>
</ul>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb136" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Proyecto Consumo de Agua"</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Equipo 24 BEDU"</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: journal</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true </span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: false</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true </span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a><span class="al">![](Imagen1.png)</span>{fig-align="right"}</span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="fu"># Consumo de Agua en Ciudad de México.</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a><span class="fu">## Objetivo</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>El consumo general de agua en México es uno de las preocupaciones más grandes de los últimos años debido a la creciente escasez en toda la República. Con los años, se han registrado cientos de casos donde las demandas de agua potable a viviendas han excedido debido al incremento de viviendas, población y la falta de mantenimiento en el servicio de tuberías, lo que ha causado fugas de agua constantemente.</span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>Nuestro trabajo pretende analizar datos del consumo del agua en las alcaldías de la Ciudad de México obtenidos de SACMEX, comparando los resultados de los tres primeros bimestres de 2019. También analizar los registros de reportes de fugas de agua, mala calidad y falta de agua en la Ciudad de México, obtenidos de SACMEX a partir de 2020 con un modelo de series de tiempo.</span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>El objetivo del proyecto es poder evaluar y predecir la cantidad de fugas de agua en la Ciudad de México, haciendo una comparación con el incremento de consumo de agua en las diferentes alcaldías de la Ciudad de México.</span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a><span class="fu">## Descripción de nuestra Base de Datos.</span></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**Datos obtenidos de SACMEX: información del primer bimestre de 2019 por concepto de suministro de agua a nivel manzana considerando la facturación por servicio de consumo medido y promedio.** [**https://datos.cdmx.gob.mx/sv/dataset/consumo-agua**](https://datos.cdmx.gob.mx/sv/dataset/consumo-agua){.uri}</span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Reportes de agua: información diaria**&nbsp;**referente a los reportes realizados por ciudadanos con respecto a servicios del Sistema de Aguas de la Ciudad de México en tres ejes:&nbsp;Drenaje, agua potable y agua tratada.** <span class="ot">&lt;https://datos.cdmx.gob.mx/dataset/reportes-de-agua&gt;</span></span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a><span class="fu">### Lectura de Datos:</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a><span class="in">```{r message=FALSE, warning=FALSE}</span></span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Librerías </span></span>
<span id="cb136-36"><a href="#cb136-36" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># gráficas</span></span>
<span id="cb136-37"><a href="#cb136-37" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)   <span class="co"># dataframes </span></span>
<span id="cb136-38"><a href="#cb136-38" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb136-39"><a href="#cb136-39" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-40"><a href="#cb136-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-41"><a href="#cb136-41" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Consumo de agua Histórico 2019</span>
<span id="cb136-42"><a href="#cb136-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-45"><a href="#cb136-45" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-46"><a href="#cb136-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos de la base de datos de consumo de agua del primer bimestre de 2019 en Ciudad de México.</span></span>
<span id="cb136-47"><a href="#cb136-47" aria-hidden="true" tabindex="-1"></a>df.consumo <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/consumo_agua_historico_2019.csv'</span>)</span>
<span id="cb136-48"><a href="#cb136-48" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-49"><a href="#cb136-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-50"><a href="#cb136-50" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Reportes de fugas. https://datos.cdmx.gob.mx/dataset/reportes-de-agua</span>
<span id="cb136-51"><a href="#cb136-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-54"><a href="#cb136-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-55"><a href="#cb136-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Datos de la base de datos de reporte de fugas en Ciudad de México de 2018 a 2022.</span></span>
<span id="cb136-56"><a href="#cb136-56" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/reportes_agua_hist.csv'</span>)</span>
<span id="cb136-57"><a href="#cb136-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-58"><a href="#cb136-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-59"><a href="#cb136-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-60"><a href="#cb136-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## Consumo de Agua en Ciudad de México</span></span>
<span id="cb136-61"><a href="#cb136-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-62"><a href="#cb136-62" aria-hidden="true" tabindex="-1"></a><span class="fu">### Preprocesamiento de Datos</span></span>
<span id="cb136-63"><a href="#cb136-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-64"><a href="#cb136-64" aria-hidden="true" tabindex="-1"></a>**Descripción inicial de los atributos de los dato**</span>
<span id="cb136-65"><a href="#cb136-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-68"><a href="#cb136-68" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-69"><a href="#cb136-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Clase de dataframe </span></span>
<span id="cb136-70"><a href="#cb136-70" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo)</span>
<span id="cb136-71"><a href="#cb136-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-72"><a href="#cb136-72" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensión del dataframe </span></span>
<span id="cb136-73"><a href="#cb136-73" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df.consumo)</span>
<span id="cb136-74"><a href="#cb136-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-75"><a href="#cb136-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de los dataframe </span></span>
<span id="cb136-76"><a href="#cb136-76" aria-hidden="true" tabindex="-1"></a>(<span class="fu">str</span>(df.consumo))</span>
<span id="cb136-77"><a href="#cb136-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-78"><a href="#cb136-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeras filas. </span></span>
<span id="cb136-79"><a href="#cb136-79" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df.consumo)</span>
<span id="cb136-80"><a href="#cb136-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-81"><a href="#cb136-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Acomodamos las filas </span></span>
<span id="cb136-82"><a href="#cb136-82" aria-hidden="true" tabindex="-1"></a>df.consumo <span class="ot">&lt;-</span> df.consumo[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">15</span>, <span class="dv">16</span>)]</span>
<span id="cb136-83"><a href="#cb136-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-84"><a href="#cb136-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de las columnas </span></span>
<span id="cb136-85"><a href="#cb136-85" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.consumo)</span>
<span id="cb136-86"><a href="#cb136-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-87"><a href="#cb136-87" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo)</span>
<span id="cb136-88"><a href="#cb136-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-89"><a href="#cb136-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-90"><a href="#cb136-90" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-91"><a href="#cb136-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-92"><a href="#cb136-92" aria-hidden="true" tabindex="-1"></a>Podemos notar que existen 16 columnas con la siguiente información:</span>
<span id="cb136-93"><a href="#cb136-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-94"><a href="#cb136-94" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>fecha de referencia tiene clase de character, lo que debemos cambiar.</span>
<span id="cb136-95"><a href="#cb136-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-96"><a href="#cb136-96" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>El año único es 2019 por lo que no se necesita esa columna en la base.</span>
<span id="cb136-97"><a href="#cb136-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-98"><a href="#cb136-98" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>La columna de bimestre solo tiene tres datos que son cualitativos ordinales, que corresponden al primer, segundo y tercer bimestre del año 2019.</span>
<span id="cb136-99"><a href="#cb136-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-100"><a href="#cb136-100" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>La columan_total_mixto se refiere a: el consumo total en inmuebles de uso Doméstico y no doméstico simultáneamente.</span>
<span id="cb136-101"><a href="#cb136-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-102"><a href="#cb136-102" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>consumo_prom_dom se refiere al consumo promedio en inmuebles de uso Doméstico.</span>
<span id="cb136-103"><a href="#cb136-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-104"><a href="#cb136-104" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>consumo_total_dom se refiere al consumo total en inmuebles de uso Doméstico</span>
<span id="cb136-105"><a href="#cb136-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-106"><a href="#cb136-106" aria-hidden="true" tabindex="-1"></a><span class="ss">7.  </span>consumo_prom_mixto se refiere al consumo de uso Doméstico y no doméstico.</span>
<span id="cb136-107"><a href="#cb136-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-108"><a href="#cb136-108" aria-hidden="true" tabindex="-1"></a><span class="ss">8.  </span>consumo_total se refiere al consumo total Doméstico, No doméstico y mixto.</span>
<span id="cb136-109"><a href="#cb136-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-110"><a href="#cb136-110" aria-hidden="true" tabindex="-1"></a><span class="ss">9.  </span>consumo_prom se refiere al consumo promedio Doméstico, No doméstico y mixto.</span>
<span id="cb136-111"><a href="#cb136-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-112"><a href="#cb136-112" aria-hidden="true" tabindex="-1"></a><span class="ss">10. </span>consumo_prom_no_dom se refiere al consumo promedio No Doméstico.</span>
<span id="cb136-113"><a href="#cb136-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-114"><a href="#cb136-114" aria-hidden="true" tabindex="-1"></a><span class="ss">11. </span>consumo_total_no_dom se refiere al consumo total No Doméstico.</span>
<span id="cb136-115"><a href="#cb136-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-116"><a href="#cb136-116" aria-hidden="true" tabindex="-1"></a><span class="ss">12. </span>indice_des: Construcción estadística mediante variables de tipo socioeconómico derivadas de información oficial, permite diferenciar territorialmente a la población de la Ciudad de México de acuerdo a su nivel de desarrollo económico, agregando la información a nivel manzana. ALTO, MEDIO, BAJO Y POPULAR.</span>
<span id="cb136-117"><a href="#cb136-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-118"><a href="#cb136-118" aria-hidden="true" tabindex="-1"></a><span class="ss">13. </span>colonia</span>
<span id="cb136-119"><a href="#cb136-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-120"><a href="#cb136-120" aria-hidden="true" tabindex="-1"></a><span class="ss">14. </span>alcaldía: 16 alcaldías de la Ciudad de México</span>
<span id="cb136-121"><a href="#cb136-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-122"><a href="#cb136-122" aria-hidden="true" tabindex="-1"></a><span class="ss">15. </span>latitud</span>
<span id="cb136-123"><a href="#cb136-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-124"><a href="#cb136-124" aria-hidden="true" tabindex="-1"></a><span class="ss">16. </span>longitud</span>
<span id="cb136-125"><a href="#cb136-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-128"><a href="#cb136-128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-129"><a href="#cb136-129" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna fecha_referencia</span></span>
<span id="cb136-130"><a href="#cb136-130" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span>
<span id="cb136-131"><a href="#cb136-131" aria-hidden="true" tabindex="-1"></a>df.consumo<span class="sc">$</span>fecha_referencia <span class="ot">&lt;-</span> <span class="fu">as.Date.character</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span>
<span id="cb136-132"><a href="#cb136-132" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.consumo<span class="sc">$</span>fecha_referencia)</span>
<span id="cb136-133"><a href="#cb136-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-134"><a href="#cb136-134" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-135"><a href="#cb136-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-136"><a href="#cb136-136" aria-hidden="true" tabindex="-1"></a>**Análisis de Datos Nulos**</span>
<span id="cb136-137"><a href="#cb136-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-140"><a href="#cb136-140" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-141"><a href="#cb136-141" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.consumo), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span>
<span id="cb136-142"><a href="#cb136-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-143"><a href="#cb136-143" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-144"><a href="#cb136-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-147"><a href="#cb136-147" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-148"><a href="#cb136-148" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de alcaldía </span></span>
<span id="cb136-149"><a href="#cb136-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-150"><a href="#cb136-150" aria-hidden="true" tabindex="-1"></a>df.consumo.alcaldia <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.consumo<span class="sc">$</span>alcaldia)</span>
<span id="cb136-151"><a href="#cb136-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-152"><a href="#cb136-152" aria-hidden="true" tabindex="-1"></a>df.consumo.clean <span class="ot">&lt;-</span> df.consumo[df.consumo.alcaldia,]</span>
<span id="cb136-153"><a href="#cb136-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-154"><a href="#cb136-154" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.consumo.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span>
<span id="cb136-155"><a href="#cb136-155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-156"><a href="#cb136-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-159"><a href="#cb136-159" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-160"><a href="#cb136-160" aria-hidden="true" tabindex="-1"></a><span class="co"># Quitar columna de año 2019</span></span>
<span id="cb136-161"><a href="#cb136-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-162"><a href="#cb136-162" aria-hidden="true" tabindex="-1"></a>df.consumo.clean <span class="ot">&lt;-</span> df.consumo.clean[,<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb136-163"><a href="#cb136-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-164"><a href="#cb136-164" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.consumo.clean)</span>
<span id="cb136-165"><a href="#cb136-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-166"><a href="#cb136-166" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-167"><a href="#cb136-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-168"><a href="#cb136-168" aria-hidden="true" tabindex="-1"></a><span class="fu">### Análisis Exploratorio</span></span>
<span id="cb136-169"><a href="#cb136-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-172"><a href="#cb136-172" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-173"><a href="#cb136-173" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo.clean)</span>
<span id="cb136-174"><a href="#cb136-174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-175"><a href="#cb136-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-178"><a href="#cb136-178" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-179"><a href="#cb136-179" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar tipo de dato character a factor </span></span>
<span id="cb136-180"><a href="#cb136-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-181"><a href="#cb136-181" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>bimestre  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>bimestre)</span>
<span id="cb136-182"><a href="#cb136-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-183"><a href="#cb136-183" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>indice_des  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>indice_des)</span>
<span id="cb136-184"><a href="#cb136-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-185"><a href="#cb136-185" aria-hidden="true" tabindex="-1"></a>df.consumo.clean<span class="sc">$</span>alcaldia  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.consumo.clean<span class="sc">$</span>alcaldia)</span>
<span id="cb136-186"><a href="#cb136-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-187"><a href="#cb136-187" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.consumo.clean)</span>
<span id="cb136-188"><a href="#cb136-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-189"><a href="#cb136-189" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-190"><a href="#cb136-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-191"><a href="#cb136-191" aria-hidden="true" tabindex="-1"></a><span class="fu">### Análisis de la distribución de los datos.</span></span>
<span id="cb136-192"><a href="#cb136-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-193"><a href="#cb136-193" aria-hidden="true" tabindex="-1"></a>**Análisis de las categorías de los datos.**</span>
<span id="cb136-194"><a href="#cb136-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-195"><a href="#cb136-195" aria-hidden="true" tabindex="-1"></a>Tablas de Frecuencias y Gráficos de Barras para las columnas Bimestre, Índice de Desarrollo, Alcaldía</span>
<span id="cb136-196"><a href="#cb136-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-199"><a href="#cb136-199" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-200"><a href="#cb136-200" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de Frecuencias Absolutas, Relativas</span></span>
<span id="cb136-201"><a href="#cb136-201" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-202"><a href="#cb136-202" aria-hidden="true" tabindex="-1"></a>freq_id <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-203"><a href="#cb136-203" aria-hidden="true" tabindex="-1"></a>           <span class="fu">group_by</span>(alcaldia, bimestre, indice_des) <span class="sc">%&gt;%</span></span>
<span id="cb136-204"><a href="#cb136-204" aria-hidden="true" tabindex="-1"></a>           <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb136-205"><a href="#cb136-205" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>)) </span>
<span id="cb136-206"><a href="#cb136-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-207"><a href="#cb136-207" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de Frecuencias absolutas</span></span>
<span id="cb136-208"><a href="#cb136-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-209"><a href="#cb136-209" aria-hidden="true" tabindex="-1"></a>graf_id <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-210"><a href="#cb136-210" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> indice_des, <span class="at">fill =</span> alcaldia)) <span class="sc">+</span></span>
<span id="cb136-211"><a href="#cb136-211" aria-hidden="true" tabindex="-1"></a>           <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb136-212"><a href="#cb136-212" aria-hidden="true" tabindex="-1"></a>           <span class="fu">facet_wrap</span>(<span class="sc">~</span>bimestre)<span class="sc">+</span></span>
<span id="cb136-213"><a href="#cb136-213" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Consumo en m3 de agua"</span>, </span>
<span id="cb136-214"><a href="#cb136-214" aria-hidden="true" tabindex="-1"></a>                 <span class="at">subtitle =</span> <span class="st">"Por alcaldía e índice de desarrollo. 2019"</span>,</span>
<span id="cb136-215"><a href="#cb136-215" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> <span class="st">"Indice de Desarrollo"</span>,</span>
<span id="cb136-216"><a href="#cb136-216" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb136-217"><a href="#cb136-217" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb136-218"><a href="#cb136-218" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb136-219"><a href="#cb136-219" aria-hidden="true" tabindex="-1"></a>graf_id</span>
<span id="cb136-220"><a href="#cb136-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-221"><a href="#cb136-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-222"><a href="#cb136-222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-223"><a href="#cb136-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-224"><a href="#cb136-224" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distribuciones</span></span>
<span id="cb136-225"><a href="#cb136-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-226"><a href="#cb136-226" aria-hidden="true" tabindex="-1"></a>**Medidas de Tendencia Central y Dispersión**</span>
<span id="cb136-227"><a href="#cb136-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-228"><a href="#cb136-228" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Análisis por Bimestre</span></span>
<span id="cb136-229"><a href="#cb136-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-232"><a href="#cb136-232" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-233"><a href="#cb136-233" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(moments)</span>
<span id="cb136-234"><a href="#cb136-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-235"><a href="#cb136-235" aria-hidden="true" tabindex="-1"></a><span class="co"># Función para calcular medidas de tendencia central y dispersión.</span></span>
<span id="cb136-236"><a href="#cb136-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-237"><a href="#cb136-237" aria-hidden="true" tabindex="-1"></a>  calcular_medidas <span class="ot">&lt;-</span> <span class="cf">function</span>(dataframe, columna) {</span>
<span id="cb136-238"><a href="#cb136-238" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-239"><a href="#cb136-239" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calcular las medidas descriptivas</span></span>
<span id="cb136-240"><a href="#cb136-240" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-241"><a href="#cb136-241" aria-hidden="true" tabindex="-1"></a>    Max <span class="ot">&lt;-</span> <span class="fu">max</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-242"><a href="#cb136-242" aria-hidden="true" tabindex="-1"></a>    Min <span class="ot">&lt;-</span> <span class="fu">min</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-243"><a href="#cb136-243" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-244"><a href="#cb136-244" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Tendencia Central</span></span>
<span id="cb136-245"><a href="#cb136-245" aria-hidden="true" tabindex="-1"></a>    Media <span class="ot">&lt;-</span> <span class="fu">mean</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-246"><a href="#cb136-246" aria-hidden="true" tabindex="-1"></a>    Mediana <span class="ot">&lt;-</span> <span class="fu">median</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-247"><a href="#cb136-247" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-248"><a href="#cb136-248" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Medidas de Dispersión </span></span>
<span id="cb136-249"><a href="#cb136-249" aria-hidden="true" tabindex="-1"></a>    Varianza <span class="ot">&lt;-</span> <span class="fu">var</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-250"><a href="#cb136-250" aria-hidden="true" tabindex="-1"></a>    Desv <span class="ot">&lt;-</span> <span class="fu">sd</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-251"><a href="#cb136-251" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-252"><a href="#cb136-252" aria-hidden="true" tabindex="-1"></a>    RangoIQ <span class="ot">&lt;-</span> <span class="fu">IQR</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-253"><a href="#cb136-253" aria-hidden="true" tabindex="-1"></a>    cuartiles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(dataframe[[columna]], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.50</span>, <span class="fl">0.75</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-254"><a href="#cb136-254" aria-hidden="true" tabindex="-1"></a>    deciles <span class="ot">&lt;-</span> <span class="fu">quantile</span>(dataframe[[columna]], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">0.9</span>), <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-255"><a href="#cb136-255" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-256"><a href="#cb136-256" aria-hidden="true" tabindex="-1"></a>    skw <span class="ot">&lt;-</span> <span class="fu">skewness</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-257"><a href="#cb136-257" aria-hidden="true" tabindex="-1"></a>    kts <span class="ot">&lt;-</span> <span class="fu">kurtosis</span>(dataframe[[columna]], <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb136-258"><a href="#cb136-258" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-259"><a href="#cb136-259" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-260"><a href="#cb136-260" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.1</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">1</span>]</span>
<span id="cb136-261"><a href="#cb136-261" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.2</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">2</span>]  </span>
<span id="cb136-262"><a href="#cb136-262" aria-hidden="true" tabindex="-1"></a>    q<span class="fl">.3</span> <span class="ot">&lt;-</span> cuartiles[<span class="dv">3</span>]</span>
<span id="cb136-263"><a href="#cb136-263" aria-hidden="true" tabindex="-1"></a>    d<span class="fl">.2</span> <span class="ot">&lt;-</span> deciles[<span class="dv">1</span>]</span>
<span id="cb136-264"><a href="#cb136-264" aria-hidden="true" tabindex="-1"></a>    d<span class="fl">.9</span> <span class="ot">&lt;-</span> deciles [<span class="dv">2</span>]</span>
<span id="cb136-265"><a href="#cb136-265" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-266"><a href="#cb136-266" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Crear un vector con las medidas</span></span>
<span id="cb136-267"><a href="#cb136-267" aria-hidden="true" tabindex="-1"></a>    medidas_vector <span class="ot">&lt;-</span> <span class="fu">round</span>(<span class="fu">c</span>(Max, Min, Media, Mediana, Varianza, Desv, RangoIQ, </span>
<span id="cb136-268"><a href="#cb136-268" aria-hidden="true" tabindex="-1"></a>                        q<span class="fl">.1</span>, q<span class="fl">.2</span>, q<span class="fl">.3</span>, d<span class="fl">.2</span>, d<span class="fl">.9</span>, skw, kts),<span class="dv">2</span>)</span>
<span id="cb136-269"><a href="#cb136-269" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-270"><a href="#cb136-270" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(medidas_vector)</span>
<span id="cb136-271"><a href="#cb136-271" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb136-272"><a href="#cb136-272" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-273"><a href="#cb136-273" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-274"><a href="#cb136-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-277"><a href="#cb136-277" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-278"><a href="#cb136-278" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionando datos por bimestre, quitando outliers alrededor del 10% de la cola derecha.</span></span>
<span id="cb136-279"><a href="#cb136-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-280"><a href="#cb136-280" aria-hidden="true" tabindex="-1"></a>out_nivel <span class="ot">&lt;-</span> <span class="dv">3000</span></span>
<span id="cb136-281"><a href="#cb136-281" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-282"><a href="#cb136-282" aria-hidden="true" tabindex="-1"></a>bim_1 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-283"><a href="#cb136-283" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-284"><a href="#cb136-284" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-285"><a href="#cb136-285" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span>
<span id="cb136-286"><a href="#cb136-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-287"><a href="#cb136-287" aria-hidden="true" tabindex="-1"></a>bim_2 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-288"><a href="#cb136-288" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-289"><a href="#cb136-289" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-290"><a href="#cb136-290" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span>
<span id="cb136-291"><a href="#cb136-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-292"><a href="#cb136-292" aria-hidden="true" tabindex="-1"></a>bim_3 <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-293"><a href="#cb136-293" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(bimestre <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-294"><a href="#cb136-294" aria-hidden="true" tabindex="-1"></a>         <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-295"><a href="#cb136-295" aria-hidden="true" tabindex="-1"></a>         <span class="fu">select</span>(alcaldia, consumo_total, indice_des)</span>
<span id="cb136-296"><a href="#cb136-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-297"><a href="#cb136-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-298"><a href="#cb136-298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-299"><a href="#cb136-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-302"><a href="#cb136-302" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-303"><a href="#cb136-303" aria-hidden="true" tabindex="-1"></a>df.medidas.ct <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">totales =</span> <span class="fu">calcular_medidas</span>(df.consumo.clean, <span class="st">'consumo_total'</span>), </span>
<span id="cb136-304"><a href="#cb136-304" aria-hidden="true" tabindex="-1"></a>                               <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb136-305"><a href="#cb136-305" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb136-306"><a href="#cb136-306" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb136-307"><a href="#cb136-307" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb136-308"><a href="#cb136-308" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb136-309"><a href="#cb136-309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-310"><a href="#cb136-310" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 1'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_1, <span class="st">'consumo_total'</span>)</span>
<span id="cb136-311"><a href="#cb136-311" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 2'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_2, <span class="st">'consumo_total'</span>)</span>
<span id="cb136-312"><a href="#cb136-312" aria-hidden="true" tabindex="-1"></a>df.medidas.ct[, <span class="st">'bimestre 3'</span>] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(bim_3, <span class="st">'consumo_total'</span>)</span>
<span id="cb136-313"><a href="#cb136-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-314"><a href="#cb136-314" aria-hidden="true" tabindex="-1"></a>df.medidas.ct</span>
<span id="cb136-315"><a href="#cb136-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-316"><a href="#cb136-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-317"><a href="#cb136-317" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-318"><a href="#cb136-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-321"><a href="#cb136-321" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-322"><a href="#cb136-322" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers</span></span>
<span id="cb136-323"><a href="#cb136-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-324"><a href="#cb136-324" aria-hidden="true" tabindex="-1"></a>out_nivel <span class="ot">&lt;-</span> <span class="dv">3000</span></span>
<span id="cb136-325"><a href="#cb136-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-326"><a href="#cb136-326" aria-hidden="true" tabindex="-1"></a>df.outliers <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-327"><a href="#cb136-327" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(consumo_total <span class="sc">&gt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-328"><a href="#cb136-328" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(bimestre) <span class="sc">%&gt;%</span></span>
<span id="cb136-329"><a href="#cb136-329" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb136-330"><a href="#cb136-330" aria-hidden="true" tabindex="-1"></a>              <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>))   </span>
<span id="cb136-331"><a href="#cb136-331" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-332"><a href="#cb136-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-333"><a href="#cb136-333" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb136-334"><a href="#cb136-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-335"><a href="#cb136-335" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.1</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-336"><a href="#cb136-336" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-337"><a href="#cb136-337" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb136-338"><a href="#cb136-338" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb136-339"><a href="#cb136-339" aria-hidden="true" tabindex="-1"></a>          <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb136-340"><a href="#cb136-340" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb136-341"><a href="#cb136-341" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb136-342"><a href="#cb136-342" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb136-343"><a href="#cb136-343" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()</span>
<span id="cb136-344"><a href="#cb136-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-345"><a href="#cb136-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-346"><a href="#cb136-346" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb136-347"><a href="#cb136-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-348"><a href="#cb136-348" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.2</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-349"><a href="#cb136-349" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> out_nivel) <span class="sc">%&gt;%</span></span>
<span id="cb136-350"><a href="#cb136-350" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb136-351"><a href="#cb136-351" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb136-352"><a href="#cb136-352" aria-hidden="true" tabindex="-1"></a>          <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb136-353"><a href="#cb136-353" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb136-354"><a href="#cb136-354" aria-hidden="true" tabindex="-1"></a>              <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb136-355"><a href="#cb136-355" aria-hidden="true" tabindex="-1"></a>              <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb136-356"><a href="#cb136-356" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()</span>
<span id="cb136-357"><a href="#cb136-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-358"><a href="#cb136-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-359"><a href="#cb136-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-360"><a href="#cb136-360" aria-hidden="true" tabindex="-1"></a>graf<span class="fl">.3</span> <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-361"><a href="#cb136-361" aria-hidden="true" tabindex="-1"></a>          <span class="fu">filter</span>(consumo_total <span class="sc">&lt;</span> <span class="dv">5000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-362"><a href="#cb136-362" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> consumo_total, <span class="at">fill=</span>bimestre)) <span class="sc">+</span></span>
<span id="cb136-363"><a href="#cb136-363" aria-hidden="true" tabindex="-1"></a>          <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb136-364"><a href="#cb136-364" aria-hidden="true" tabindex="-1"></a>          <span class="fu">facet_wrap</span>(<span class="sc">~</span>bimestre) <span class="sc">+</span></span>
<span id="cb136-365"><a href="#cb136-365" aria-hidden="true" tabindex="-1"></a>          <span class="co">#guides(fill = guide_legend(title = "Indice Desarrollo"))+</span></span>
<span id="cb136-366"><a href="#cb136-366" aria-hidden="true" tabindex="-1"></a>          <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb136-367"><a href="#cb136-367" aria-hidden="true" tabindex="-1"></a>            <span class="at">x =</span> <span class="st">"Consumo Total"</span>,</span>
<span id="cb136-368"><a href="#cb136-368" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb136-369"><a href="#cb136-369" aria-hidden="true" tabindex="-1"></a>          <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb136-370"><a href="#cb136-370" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb136-371"><a href="#cb136-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-372"><a href="#cb136-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-373"><a href="#cb136-373" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la libreria cowplot</span></span>
<span id="cb136-374"><a href="#cb136-374" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb136-375"><a href="#cb136-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-376"><a href="#cb136-376" aria-hidden="true" tabindex="-1"></a>consumo_total_gr <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>(graf<span class="fl">.1</span>, graf<span class="fl">.2</span>, graf<span class="fl">.3</span>)</span>
<span id="cb136-377"><a href="#cb136-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-378"><a href="#cb136-378" aria-hidden="true" tabindex="-1"></a>consumo_total_gr</span>
<span id="cb136-379"><a href="#cb136-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-380"><a href="#cb136-380" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-381"><a href="#cb136-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-382"><a href="#cb136-382" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Análisis por Alcaldía</span></span>
<span id="cb136-383"><a href="#cb136-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-384"><a href="#cb136-384" aria-hidden="true" tabindex="-1"></a>Columnas numéricas: "consumo_total_mixto" "consumo_prom_dom" "consumo_total_dom" "consumo_prom_mixto" "consumo_total" "consumo_prom" "consumo_prom_no_dom" "consumo_total_no_dom"</span>
<span id="cb136-385"><a href="#cb136-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-388"><a href="#cb136-388" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-389"><a href="#cb136-389" aria-hidden="true" tabindex="-1"></a><span class="co"># Para crear un dataframe con el resumen de las medidas por Alcaldía. </span></span>
<span id="cb136-390"><a href="#cb136-390" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-391"><a href="#cb136-391" aria-hidden="true" tabindex="-1"></a>df.con.num <span class="ot">&lt;-</span> <span class="fu">select</span>(df.consumo.clean, <span class="fu">c</span>(<span class="st">"alcaldia"</span>, <span class="st">"consumo_prom_mixto"</span>, <span class="st">"consumo_total_mixto"</span>,</span>
<span id="cb136-392"><a href="#cb136-392" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_prom_dom"</span>, <span class="st">"consumo_total_dom"</span>,</span>
<span id="cb136-393"><a href="#cb136-393" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_prom_no_dom"</span>,</span>
<span id="cb136-394"><a href="#cb136-394" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"consumo_total_no_dom"</span>, <span class="st">"consumo_prom"</span>, <span class="st">"consumo_total"</span>))</span>
<span id="cb136-395"><a href="#cb136-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-396"><a href="#cb136-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-397"><a href="#cb136-397" aria-hidden="true" tabindex="-1"></a>nom.col <span class="ot">&lt;-</span> <span class="fu">colnames</span>(df.con.num[,<span class="dv">2</span><span class="sc">:</span><span class="dv">9</span>])</span>
<span id="cb136-398"><a href="#cb136-398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-399"><a href="#cb136-399" aria-hidden="true" tabindex="-1"></a>nom.col</span>
<span id="cb136-400"><a href="#cb136-400" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-401"><a href="#cb136-401" aria-hidden="true" tabindex="-1"></a><span class="co"># CAMBIAR EL NOMBRE DE LA ALCALDÍA (En aplicación Shiny se muestra más dinámico)</span></span>
<span id="cb136-402"><a href="#cb136-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-403"><a href="#cb136-403" aria-hidden="true" tabindex="-1"></a><span class="co"># Alcaldía = Benito Juarez, Atributo = Consumo Promedio</span></span>
<span id="cb136-404"><a href="#cb136-404" aria-hidden="true" tabindex="-1"></a>BENITO<span class="fl">.1</span> <span class="ot">&lt;-</span> df.con.num <span class="sc">%&gt;%</span></span>
<span id="cb136-405"><a href="#cb136-405" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, )</span>
<span id="cb136-406"><a href="#cb136-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-407"><a href="#cb136-407" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-408"><a href="#cb136-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-409"><a href="#cb136-409" aria-hidden="true" tabindex="-1"></a>df.medidas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>()</span>
<span id="cb136-410"><a href="#cb136-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-411"><a href="#cb136-411" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> nom.col){</span>
<span id="cb136-412"><a href="#cb136-412" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-413"><a href="#cb136-413" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">length</span>(df.medidas) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb136-414"><a href="#cb136-414" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb136-415"><a href="#cb136-415" aria-hidden="true" tabindex="-1"></a>      df.medidas <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">calcular_medidas</span>(BENITO<span class="fl">.1</span>, i), </span>
<span id="cb136-416"><a href="#cb136-416" aria-hidden="true" tabindex="-1"></a>                               <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb136-417"><a href="#cb136-417" aria-hidden="true" tabindex="-1"></a>                                              <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb136-418"><a href="#cb136-418" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb136-419"><a href="#cb136-419" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb136-420"><a href="#cb136-420" aria-hidden="true" tabindex="-1"></a>                                             <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb136-421"><a href="#cb136-421" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb136-422"><a href="#cb136-422" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colnames</span>(df.medidas)[<span class="dv">1</span>] <span class="ot">&lt;-</span> nom.col[<span class="dv">1</span>]</span>
<span id="cb136-423"><a href="#cb136-423" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb136-424"><a href="#cb136-424" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb136-425"><a href="#cb136-425" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb136-426"><a href="#cb136-426" aria-hidden="true" tabindex="-1"></a>      df.medidas[, i] <span class="ot">&lt;-</span> <span class="fu">calcular_medidas</span>(BENITO<span class="fl">.1</span>, i)</span>
<span id="cb136-427"><a href="#cb136-427" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb136-428"><a href="#cb136-428" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-429"><a href="#cb136-429" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb136-430"><a href="#cb136-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-431"><a href="#cb136-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-432"><a href="#cb136-432" aria-hidden="true" tabindex="-1"></a>df.medidas</span>
<span id="cb136-433"><a href="#cb136-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-434"><a href="#cb136-434" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-435"><a href="#cb136-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-438"><a href="#cb136-438" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-439"><a href="#cb136-439" aria-hidden="true" tabindex="-1"></a><span class="co"># Alcaldía = Benito Juarez, Atributo = Consumo Promedio</span></span>
<span id="cb136-440"><a href="#cb136-440" aria-hidden="true" tabindex="-1"></a>BENITO <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-441"><a href="#cb136-441" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, )</span>
<span id="cb136-442"><a href="#cb136-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-443"><a href="#cb136-443" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers</span></span>
<span id="cb136-444"><a href="#cb136-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-445"><a href="#cb136-445" aria-hidden="true" tabindex="-1"></a>BENITO_OUT <span class="ot">&lt;-</span> df.consumo.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-446"><a href="#cb136-446" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>, bimestre <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-447"><a href="#cb136-447" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(consumo_prom <span class="sc">&gt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-448"><a href="#cb136-448" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(colonia) <span class="sc">%&gt;%</span></span>
<span id="cb136-449"><a href="#cb136-449" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="co">#%&gt;%</span></span>
<span id="cb136-450"><a href="#cb136-450" aria-hidden="true" tabindex="-1"></a>              <span class="co">#mutate(prop =  paste(round(100*prop.table(n), 2), "%", sep=""))   </span></span>
<span id="cb136-451"><a href="#cb136-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-452"><a href="#cb136-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-453"><a href="#cb136-453" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb136-454"><a href="#cb136-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-455"><a href="#cb136-455" aria-hidden="true" tabindex="-1"></a>aa1 <span class="ot">&lt;-</span> BENITO <span class="sc">%&gt;%</span></span>
<span id="cb136-456"><a href="#cb136-456" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-457"><a href="#cb136-457" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(consumo_prom, <span class="at">fill=</span>indice_des)) <span class="sc">+</span></span>
<span id="cb136-458"><a href="#cb136-458" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb136-459"><a href="#cb136-459" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb136-460"><a href="#cb136-460" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb136-461"><a href="#cb136-461" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb136-462"><a href="#cb136-462" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb136-463"><a href="#cb136-463" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span>
<span id="cb136-464"><a href="#cb136-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-465"><a href="#cb136-465" aria-hidden="true" tabindex="-1"></a>aa1</span>
<span id="cb136-466"><a href="#cb136-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-467"><a href="#cb136-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-468"><a href="#cb136-468" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb136-469"><a href="#cb136-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-470"><a href="#cb136-470" aria-hidden="true" tabindex="-1"></a>aa2 <span class="ot">&lt;-</span> BENITO  <span class="sc">%&gt;%</span> </span>
<span id="cb136-471"><a href="#cb136-471" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-472"><a href="#cb136-472" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>consumo_prom, <span class="at">fill=</span>indice_des)) <span class="sc">+</span></span>
<span id="cb136-473"><a href="#cb136-473" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb136-474"><a href="#cb136-474" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb136-475"><a href="#cb136-475" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot"</span>, </span>
<span id="cb136-476"><a href="#cb136-476" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb136-477"><a href="#cb136-477" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb136-478"><a href="#cb136-478" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_classic</span>()</span>
<span id="cb136-479"><a href="#cb136-479" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-480"><a href="#cb136-480" aria-hidden="true" tabindex="-1"></a>aa2</span>
<span id="cb136-481"><a href="#cb136-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-482"><a href="#cb136-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-483"><a href="#cb136-483" aria-hidden="true" tabindex="-1"></a>aa3 <span class="ot">&lt;-</span> BENITO <span class="sc">%&gt;%</span></span>
<span id="cb136-484"><a href="#cb136-484" aria-hidden="true" tabindex="-1"></a>      <span class="fu">filter</span>(consumo_prom <span class="sc">&lt;</span> <span class="dv">60</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-485"><a href="#cb136-485" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> consumo_prom, <span class="at">fill =</span> indice_des)) <span class="sc">+</span></span>
<span id="cb136-486"><a href="#cb136-486" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb136-487"><a href="#cb136-487" aria-hidden="true" tabindex="-1"></a>      <span class="fu">facet_wrap</span>(<span class="sc">~</span>indice_des) <span class="sc">+</span></span>
<span id="cb136-488"><a href="#cb136-488" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Indice Desarrollo"</span>))<span class="sc">+</span></span>
<span id="cb136-489"><a href="#cb136-489" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb136-490"><a href="#cb136-490" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Consumo"</span>,</span>
<span id="cb136-491"><a href="#cb136-491" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb136-492"><a href="#cb136-492" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb136-493"><a href="#cb136-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-494"><a href="#cb136-494" aria-hidden="true" tabindex="-1"></a>aa3</span>
<span id="cb136-495"><a href="#cb136-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-496"><a href="#cb136-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-497"><a href="#cb136-497" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-498"><a href="#cb136-498" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-499"><a href="#cb136-499" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la libreria cowplot</span></span>
<span id="cb136-500"><a href="#cb136-500" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb136-501"><a href="#cb136-501" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-502"><a href="#cb136-502" aria-hidden="true" tabindex="-1"></a>consumo_prom_gr <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>( aa1, aa2, aa3)</span>
<span id="cb136-503"><a href="#cb136-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-504"><a href="#cb136-504" aria-hidden="true" tabindex="-1"></a>consumo_prom_gr</span>
<span id="cb136-505"><a href="#cb136-505" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-506"><a href="#cb136-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-507"><a href="#cb136-507" aria-hidden="true" tabindex="-1"></a><span class="fu">### Principales inferencias de la información</span></span>
<span id="cb136-508"><a href="#cb136-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-509"><a href="#cb136-509" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Interpretación de los datos.</span></span>
<span id="cb136-510"><a href="#cb136-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-511"><a href="#cb136-511" aria-hidden="true" tabindex="-1"></a>Por Alcaldía, las tablas de frecuencia muestran un comportamiento similar por cada bimestre e índice de desarrollo. Podemos observar que el sector con índice de desarrollo bajo es el que presenta mayor consumo por metro cúbico que es consistente en cada bimestre, siguiéndolo los sectores alto y popular, mientras que el sector medio es el que presenta menores consumos por metro cúbico.</span>
<span id="cb136-512"><a href="#cb136-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-515"><a href="#cb136-515" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-516"><a href="#cb136-516" aria-hidden="true" tabindex="-1"></a>graf_id</span>
<span id="cb136-517"><a href="#cb136-517" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-518"><a href="#cb136-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-519"><a href="#cb136-519" aria-hidden="true" tabindex="-1"></a>También podemos observar en los gráficos por bimestre del consumo total, que los datos se distribuyen de manera similar, con sesgo a la izquierda y con una mediana, media y desviación parecida en cada bimestre.</span>
<span id="cb136-520"><a href="#cb136-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-523"><a href="#cb136-523" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-524"><a href="#cb136-524" aria-hidden="true" tabindex="-1"></a>consumo_total_gr</span>
<span id="cb136-525"><a href="#cb136-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-526"><a href="#cb136-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-529"><a href="#cb136-529" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-530"><a href="#cb136-530" aria-hidden="true" tabindex="-1"></a>df.medidas.ct</span>
<span id="cb136-531"><a href="#cb136-531" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-532"><a href="#cb136-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-533"><a href="#cb136-533" aria-hidden="true" tabindex="-1"></a>**Análisis de las distribuciones por alcaldía**</span>
<span id="cb136-534"><a href="#cb136-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-537"><a href="#cb136-537" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-538"><a href="#cb136-538" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df.consumo.clean<span class="sc">$</span>alcaldia)</span>
<span id="cb136-539"><a href="#cb136-539" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-540"><a href="#cb136-540" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-541"><a href="#cb136-541" aria-hidden="true" tabindex="-1"></a>Se puede observar en la mayoría de las distribuciones de las alcaldías, que los datos de consumo de agua se encuentran en un rango que va desde 0 a 4000 cuando son consumos totales de agua en metros cúbicos en todos los sectores de desarrollo socioeconómico. Mientras que presentan un consumo promedio que se centra en un rango de 0 a 100 metros cúbicos de agua.</span>
<span id="cb136-542"><a href="#cb136-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-543"><a href="#cb136-543" aria-hidden="true" tabindex="-1"></a>Por otra parte, el conjunto de observaciones que tiene más frecuencia en su consumo total de agua se encuentra en el sector con índice de desarrollo bajo y en el popular en la mayoría de las alcaldías, con algunas excepciones como Benito Juárez, Cuajimalpa, y Coyoacán donde el sector con índice de desarrollo alto también contiene la mayoría de los consumos totales. Mientras que en el consumo promedio los sectores con índice de desarrollo bajo y popular representan el conjunto más significativo de los datos.</span>
<span id="cb136-544"><a href="#cb136-544" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-545"><a href="#cb136-545" aria-hidden="true" tabindex="-1"></a>Todas las distribuciones están sesgadas a la izquierda, tanto de consumo total como promedio en cada alcaldía. Los datos atípicos contienen valores en el último decil con cantidades considerablemente grandes, por lo que se decidió eliminarlos del análisis.</span>
<span id="cb136-546"><a href="#cb136-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-547"><a href="#cb136-547" aria-hidden="true" tabindex="-1"></a><span class="fu">## Registro Histórico de Reportes de Fugas 2018 - 2022</span></span>
<span id="cb136-548"><a href="#cb136-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-549"><a href="#cb136-549" aria-hidden="true" tabindex="-1"></a><span class="fu">### Preprocesamiento de Datos</span></span>
<span id="cb136-550"><a href="#cb136-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-551"><a href="#cb136-551" aria-hidden="true" tabindex="-1"></a>**Descripción inicial de los atributos de los datos**</span>
<span id="cb136-552"><a href="#cb136-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-553"><a href="#cb136-553" aria-hidden="true" tabindex="-1"></a>Este conjunto de datos muestra información diaria referente a reportes realizados por ciudadanos usuarios del servicio de agua potable de al CDMX.</span>
<span id="cb136-554"><a href="#cb136-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-555"><a href="#cb136-555" aria-hidden="true" tabindex="-1"></a>Datos obtenidos de: https://datos.cdmx.gob.mx/dataset/reportes-de-agua</span>
<span id="cb136-556"><a href="#cb136-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-559"><a href="#cb136-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-560"><a href="#cb136-560" aria-hidden="true" tabindex="-1"></a><span class="co"># Clase de dataframe </span></span>
<span id="cb136-561"><a href="#cb136-561" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df.fugas)</span>
<span id="cb136-562"><a href="#cb136-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-563"><a href="#cb136-563" aria-hidden="true" tabindex="-1"></a><span class="co"># Dimensión del dataframe </span></span>
<span id="cb136-564"><a href="#cb136-564" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(df.fugas)</span>
<span id="cb136-565"><a href="#cb136-565" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-566"><a href="#cb136-566" aria-hidden="true" tabindex="-1"></a><span class="co"># Primeras filas. </span></span>
<span id="cb136-567"><a href="#cb136-567" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df.fugas)</span>
<span id="cb136-568"><a href="#cb136-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-569"><a href="#cb136-569" aria-hidden="true" tabindex="-1"></a><span class="co"># Estructura de los dataframe </span></span>
<span id="cb136-570"><a href="#cb136-570" aria-hidden="true" tabindex="-1"></a>(<span class="fu">str</span>(df.fugas))</span>
<span id="cb136-571"><a href="#cb136-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-572"><a href="#cb136-572" aria-hidden="true" tabindex="-1"></a><span class="co"># Acomodamos las filas </span></span>
<span id="cb136-573"><a href="#cb136-573" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas[, <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)]</span>
<span id="cb136-574"><a href="#cb136-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-575"><a href="#cb136-575" aria-hidden="true" tabindex="-1"></a><span class="co"># Nombre de las columnas </span></span>
<span id="cb136-576"><a href="#cb136-576" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(df.fugas)</span>
<span id="cb136-577"><a href="#cb136-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-578"><a href="#cb136-578" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.fugas)</span>
<span id="cb136-579"><a href="#cb136-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-580"><a href="#cb136-580" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-581"><a href="#cb136-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-582"><a href="#cb136-582" aria-hidden="true" tabindex="-1"></a>Podemos notar que existen 10 columnas con la siguiente información:</span>
<span id="cb136-583"><a href="#cb136-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-584"><a href="#cb136-584" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>fecha</span>
<span id="cb136-585"><a href="#cb136-585" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>folio</span>
<span id="cb136-586"><a href="#cb136-586" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>tipo_de_falla</span>
<span id="cb136-587"><a href="#cb136-587" aria-hidden="true" tabindex="-1"></a><span class="ss">4.  </span>quien_atiende</span>
<span id="cb136-588"><a href="#cb136-588" aria-hidden="true" tabindex="-1"></a><span class="ss">5.  </span>latitud</span>
<span id="cb136-589"><a href="#cb136-589" aria-hidden="true" tabindex="-1"></a><span class="ss">6.  </span>longitud</span>
<span id="cb136-590"><a href="#cb136-590" aria-hidden="true" tabindex="-1"></a><span class="ss">7.  </span>codigo_postal</span>
<span id="cb136-591"><a href="#cb136-591" aria-hidden="true" tabindex="-1"></a><span class="ss">8.  </span>colonia_registro_sacmex</span>
<span id="cb136-592"><a href="#cb136-592" aria-hidden="true" tabindex="-1"></a><span class="ss">9.  </span>colonia_datos_abiertos</span>
<span id="cb136-593"><a href="#cb136-593" aria-hidden="true" tabindex="-1"></a><span class="ss">10. </span>alcaldia</span>
<span id="cb136-594"><a href="#cb136-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-597"><a href="#cb136-597" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-598"><a href="#cb136-598" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna fecha</span></span>
<span id="cb136-599"><a href="#cb136-599" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas <span class="sc">%&gt;%</span></span>
<span id="cb136-600"><a href="#cb136-600" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha =</span> <span class="fu">as.Date</span>(fecha))</span>
<span id="cb136-601"><a href="#cb136-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-602"><a href="#cb136-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-603"><a href="#cb136-603" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambio de clase en la columna codigo_postal</span></span>
<span id="cb136-604"><a href="#cb136-604" aria-hidden="true" tabindex="-1"></a>df.fugas <span class="ot">&lt;-</span> df.fugas <span class="sc">%&gt;%</span></span>
<span id="cb136-605"><a href="#cb136-605" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">codigo_postal =</span> <span class="fu">as.character</span>(codigo_postal))</span>
<span id="cb136-606"><a href="#cb136-606" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>(df.fugas)</span>
<span id="cb136-607"><a href="#cb136-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-608"><a href="#cb136-608" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-609"><a href="#cb136-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-610"><a href="#cb136-610" aria-hidden="true" tabindex="-1"></a>**Análisis de Datos Nulos**</span>
<span id="cb136-611"><a href="#cb136-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-614"><a href="#cb136-614" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-615"><a href="#cb136-615" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span>
<span id="cb136-616"><a href="#cb136-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-617"><a href="#cb136-617" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-618"><a href="#cb136-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-621"><a href="#cb136-621" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-622"><a href="#cb136-622" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de alcaldía </span></span>
<span id="cb136-623"><a href="#cb136-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-624"><a href="#cb136-624" aria-hidden="true" tabindex="-1"></a>df.fugas.alcaldia <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.fugas<span class="sc">$</span>alcaldia)</span>
<span id="cb136-625"><a href="#cb136-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-626"><a href="#cb136-626" aria-hidden="true" tabindex="-1"></a>df.fugas.clean <span class="ot">&lt;-</span> df.fugas[df.fugas.alcaldia,]</span>
<span id="cb136-627"><a href="#cb136-627" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-628"><a href="#cb136-628" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span>
<span id="cb136-629"><a href="#cb136-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-630"><a href="#cb136-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-631"><a href="#cb136-631" aria-hidden="true" tabindex="-1"></a><span class="co"># Eliminando datos nulos de tipo de falla </span></span>
<span id="cb136-632"><a href="#cb136-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-633"><a href="#cb136-633" aria-hidden="true" tabindex="-1"></a>df.fugas.tf <span class="ot">&lt;-</span> <span class="fu">complete.cases</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span>
<span id="cb136-634"><a href="#cb136-634" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-635"><a href="#cb136-635" aria-hidden="true" tabindex="-1"></a>df.fugas.clean <span class="ot">&lt;-</span> df.fugas.clean[df.fugas.tf,]</span>
<span id="cb136-636"><a href="#cb136-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-637"><a href="#cb136-637" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">'NA'</span> <span class="ot">=</span> <span class="fu">apply</span>(<span class="at">X =</span> <span class="fu">is.na</span>(df.fugas.clean), <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> sum))</span>
<span id="cb136-638"><a href="#cb136-638" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-639"><a href="#cb136-639" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-640"><a href="#cb136-640" aria-hidden="true" tabindex="-1"></a><span class="fu">### Análisis Exploratorio</span></span>
<span id="cb136-641"><a href="#cb136-641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-644"><a href="#cb136-644" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-645"><a href="#cb136-645" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df.fugas.clean)</span>
<span id="cb136-646"><a href="#cb136-646" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-647"><a href="#cb136-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-650"><a href="#cb136-650" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-651"><a href="#cb136-651" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar tipo de dato character a factor </span></span>
<span id="cb136-652"><a href="#cb136-652" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-653"><a href="#cb136-653" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>tipo_de_falla  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span>
<span id="cb136-654"><a href="#cb136-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-655"><a href="#cb136-655" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>quien_atiende  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>quien_atiende)</span>
<span id="cb136-656"><a href="#cb136-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-657"><a href="#cb136-657" aria-hidden="true" tabindex="-1"></a>df.fugas.clean<span class="sc">$</span>alcaldia  <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(df.fugas.clean<span class="sc">$</span>alcaldia)</span>
<span id="cb136-658"><a href="#cb136-658" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-659"><a href="#cb136-659" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-660"><a href="#cb136-660" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(df.fugas.clean<span class="sc">$</span>tipo_de_falla)</span>
<span id="cb136-661"><a href="#cb136-661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-662"><a href="#cb136-662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-663"><a href="#cb136-663" aria-hidden="true" tabindex="-1"></a><span class="fu">### Análisis de la distribución de los datos.</span></span>
<span id="cb136-664"><a href="#cb136-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-665"><a href="#cb136-665" aria-hidden="true" tabindex="-1"></a>**Análisis de las categorías de los datos.**</span>
<span id="cb136-666"><a href="#cb136-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-667"><a href="#cb136-667" aria-hidden="true" tabindex="-1"></a>Tablas de Frecuencias y Gráficos de Barras para las columnas Tipos de Falla y Alcaldía</span>
<span id="cb136-668"><a href="#cb136-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-671"><a href="#cb136-671" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-672"><a href="#cb136-672" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de Frecuencias Absolutas, Relativas</span></span>
<span id="cb136-673"><a href="#cb136-673" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-674"><a href="#cb136-674" aria-hidden="true" tabindex="-1"></a>freq_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-675"><a href="#cb136-675" aria-hidden="true" tabindex="-1"></a>           <span class="fu">group_by</span>(alcaldia, tipo_de_falla) <span class="sc">%&gt;%</span></span>
<span id="cb136-676"><a href="#cb136-676" aria-hidden="true" tabindex="-1"></a>           <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb136-677"><a href="#cb136-677" aria-hidden="true" tabindex="-1"></a>           <span class="fu">mutate</span>(<span class="at">prop =</span>  <span class="fu">paste</span>(<span class="fu">round</span>(<span class="dv">100</span><span class="sc">*</span><span class="fu">prop.table</span>(n), <span class="dv">2</span>), <span class="st">"%"</span>, <span class="at">sep=</span><span class="st">""</span>)) </span>
<span id="cb136-678"><a href="#cb136-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-679"><a href="#cb136-679" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de Frecuencias absolutas</span></span>
<span id="cb136-680"><a href="#cb136-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-681"><a href="#cb136-681" aria-hidden="true" tabindex="-1"></a>graf_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-682"><a href="#cb136-682" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> alcaldia, <span class="at">fill =</span> tipo_de_falla)) <span class="sc">+</span></span>
<span id="cb136-683"><a href="#cb136-683" aria-hidden="true" tabindex="-1"></a>           <span class="fu">geom_bar</span>() <span class="sc">+</span></span>
<span id="cb136-684"><a href="#cb136-684" aria-hidden="true" tabindex="-1"></a>           <span class="co">#facet_wrap(~tipo_de_falla)+</span></span>
<span id="cb136-685"><a href="#cb136-685" aria-hidden="true" tabindex="-1"></a>            <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Reportes por Tipo de Falla"</span>, </span>
<span id="cb136-686"><a href="#cb136-686" aria-hidden="true" tabindex="-1"></a>                 <span class="at">subtitle =</span> <span class="st">"Por alcaldía. 2018-2022"</span>,</span>
<span id="cb136-687"><a href="#cb136-687" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> <span class="st">"Alcaldia"</span>,</span>
<span id="cb136-688"><a href="#cb136-688" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb136-689"><a href="#cb136-689" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb136-690"><a href="#cb136-690" aria-hidden="true" tabindex="-1"></a>           <span class="fu">theme</span>(<span class="at">axis.text.x  =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>))</span>
<span id="cb136-691"><a href="#cb136-691" aria-hidden="true" tabindex="-1"></a>graf_tf</span>
<span id="cb136-692"><a href="#cb136-692" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-693"><a href="#cb136-693" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-694"><a href="#cb136-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-695"><a href="#cb136-695" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distribuciones</span></span>
<span id="cb136-696"><a href="#cb136-696" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-697"><a href="#cb136-697" aria-hidden="true" tabindex="-1"></a>Mostrando los datos convertidos a un dataframe por día, donde se incluye una columna que es el conteo de las fallas de agua por alcaldía.</span>
<span id="cb136-698"><a href="#cb136-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-701"><a href="#cb136-701" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-702"><a href="#cb136-702" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla por alcaldía y por día</span></span>
<span id="cb136-703"><a href="#cb136-703" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-704"><a href="#cb136-704" aria-hidden="true" tabindex="-1"></a>BENITO_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span> </span>
<span id="cb136-705"><a href="#cb136-705" aria-hidden="true" tabindex="-1"></a>               <span class="fu">select</span>(fecha, alcaldia, folio, tipo_de_falla) <span class="sc">%&gt;%</span></span>
<span id="cb136-706"><a href="#cb136-706" aria-hidden="true" tabindex="-1"></a>               <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-707"><a href="#cb136-707" aria-hidden="true" tabindex="-1"></a>               <span class="fu">group_by</span>(fecha) <span class="sc">%&gt;%</span></span>
<span id="cb136-708"><a href="#cb136-708" aria-hidden="true" tabindex="-1"></a>               <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>)</span>
<span id="cb136-709"><a href="#cb136-709" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-710"><a href="#cb136-710" aria-hidden="true" tabindex="-1"></a><span class="co"># Histogramas </span></span>
<span id="cb136-711"><a href="#cb136-711" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-712"><a href="#cb136-712" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-713"><a href="#cb136-713" aria-hidden="true" tabindex="-1"></a>aa1tf <span class="ot">&lt;-</span> BENITO_tf  <span class="sc">%&gt;%</span></span>
<span id="cb136-714"><a href="#cb136-714" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(count)) <span class="sc">+</span></span>
<span id="cb136-715"><a href="#cb136-715" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb136-716"><a href="#cb136-716" aria-hidden="true" tabindex="-1"></a>    <span class="co">#facet_wrap(~indice_des) +</span></span>
<span id="cb136-717"><a href="#cb136-717" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma"</span>, </span>
<span id="cb136-718"><a href="#cb136-718" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb136-719"><a href="#cb136-719" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>) <span class="sc">+</span> </span>
<span id="cb136-720"><a href="#cb136-720" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb136-721"><a href="#cb136-721" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-722"><a href="#cb136-722" aria-hidden="true" tabindex="-1"></a>aa1tf</span>
<span id="cb136-723"><a href="#cb136-723" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-724"><a href="#cb136-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-725"><a href="#cb136-725" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot</span></span>
<span id="cb136-726"><a href="#cb136-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-727"><a href="#cb136-727" aria-hidden="true" tabindex="-1"></a>aa2tf <span class="ot">&lt;-</span> BENITO_tf  <span class="sc">%&gt;%</span></span>
<span id="cb136-728"><a href="#cb136-728" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y=</span>count)) <span class="sc">+</span></span>
<span id="cb136-729"><a href="#cb136-729" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="at">varwidth =</span> <span class="cn">TRUE</span>, <span class="at">alpha=</span><span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb136-730"><a href="#cb136-730" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot"</span>, </span>
<span id="cb136-731"><a href="#cb136-731" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb136-732"><a href="#cb136-732" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb136-733"><a href="#cb136-733" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb136-734"><a href="#cb136-734" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-735"><a href="#cb136-735" aria-hidden="true" tabindex="-1"></a>aa2tf</span>
<span id="cb136-736"><a href="#cb136-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-737"><a href="#cb136-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-738"><a href="#cb136-738" aria-hidden="true" tabindex="-1"></a>aa3tf <span class="ot">&lt;-</span> BENITO_tf <span class="sc">%&gt;%</span></span>
<span id="cb136-739"><a href="#cb136-739" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> count)) <span class="sc">+</span></span>
<span id="cb136-740"><a href="#cb136-740" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>() <span class="sc">+</span> </span>
<span id="cb136-741"><a href="#cb136-741" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Reportes de Fallas"</span>))<span class="sc">+</span></span>
<span id="cb136-742"><a href="#cb136-742" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb136-743"><a href="#cb136-743" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Reportes de Fallas"</span>,</span>
<span id="cb136-744"><a href="#cb136-744" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Frequency"</span>)<span class="sc">+</span> </span>
<span id="cb136-745"><a href="#cb136-745" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb136-746"><a href="#cb136-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-747"><a href="#cb136-747" aria-hidden="true" tabindex="-1"></a>aa3tf</span>
<span id="cb136-748"><a href="#cb136-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-749"><a href="#cb136-749" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-750"><a href="#cb136-750" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfica de Dispersión </span></span>
<span id="cb136-751"><a href="#cb136-751" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-752"><a href="#cb136-752" aria-hidden="true" tabindex="-1"></a>aa4tf <span class="ot">&lt;-</span> BENITO_tf <span class="sc">%&gt;%</span></span>
<span id="cb136-753"><a href="#cb136-753" aria-hidden="true" tabindex="-1"></a>      <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y=</span> count)) <span class="sc">+</span></span>
<span id="cb136-754"><a href="#cb136-754" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb136-755"><a href="#cb136-755" aria-hidden="true" tabindex="-1"></a>      <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">title =</span> <span class="st">"Reportes de Fallas"</span>))<span class="sc">+</span></span>
<span id="cb136-756"><a href="#cb136-756" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Serie de Tiempo"</span>, </span>
<span id="cb136-757"><a href="#cb136-757" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">"Tiempo: días"</span>,</span>
<span id="cb136-758"><a href="#cb136-758" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">"Reportes de Fallas"</span>)<span class="sc">+</span> </span>
<span id="cb136-759"><a href="#cb136-759" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_classic</span>()</span>
<span id="cb136-760"><a href="#cb136-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-761"><a href="#cb136-761" aria-hidden="true" tabindex="-1"></a>aa4tf</span>
<span id="cb136-762"><a href="#cb136-762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-763"><a href="#cb136-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-764"><a href="#cb136-764" aria-hidden="true" tabindex="-1"></a><span class="co"># Para usar plot_grid se necesita la librería cowplot</span></span>
<span id="cb136-765"><a href="#cb136-765" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb136-766"><a href="#cb136-766" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-767"><a href="#cb136-767" aria-hidden="true" tabindex="-1"></a>completo <span class="ot">&lt;-</span> <span class="fu">plot_grid</span>( aa1tf, aa2tf, aa3tf, aa4tf)</span>
<span id="cb136-768"><a href="#cb136-768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-769"><a href="#cb136-769" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-770"><a href="#cb136-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-771"><a href="#cb136-771" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-772"><a href="#cb136-772" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-773"><a href="#cb136-773" aria-hidden="true" tabindex="-1"></a>**Medidas de Tendencia Central y Dispersión**</span>
<span id="cb136-774"><a href="#cb136-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-775"><a href="#cb136-775" aria-hidden="true" tabindex="-1"></a>Columnas numéricas: count</span>
<span id="cb136-776"><a href="#cb136-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-779"><a href="#cb136-779" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-780"><a href="#cb136-780" aria-hidden="true" tabindex="-1"></a>df.medidas.tf <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Medidas =</span> <span class="fu">calcular_medidas</span>(BENITO_tf, <span class="dv">2</span>), </span>
<span id="cb136-781"><a href="#cb136-781" aria-hidden="true" tabindex="-1"></a>                             <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">'Máximo'</span>, <span class="st">'Mínimo'</span>,</span>
<span id="cb136-782"><a href="#cb136-782" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'Media'</span>, <span class="st">'Mediana'</span>, <span class="st">'Varianza'</span>, </span>
<span id="cb136-783"><a href="#cb136-783" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'Desviación Estándar'</span>, <span class="st">'Rango IQ'</span>,</span>
<span id="cb136-784"><a href="#cb136-784" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">'1q'</span>, <span class="st">'2q'</span>, <span class="st">'3q'</span>, <span class="st">'2d'</span>, <span class="st">'9d'</span>,</span>
<span id="cb136-785"><a href="#cb136-785" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"Skewness"</span>, <span class="st">'Curtosis'</span>))</span>
<span id="cb136-786"><a href="#cb136-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-787"><a href="#cb136-787" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-788"><a href="#cb136-788" aria-hidden="true" tabindex="-1"></a>df.medidas.tf</span>
<span id="cb136-789"><a href="#cb136-789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-790"><a href="#cb136-790" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-791"><a href="#cb136-791" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-794"><a href="#cb136-794" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-795"><a href="#cb136-795" aria-hidden="true" tabindex="-1"></a><span class="co"># Outliers </span></span>
<span id="cb136-796"><a href="#cb136-796" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-797"><a href="#cb136-797" aria-hidden="true" tabindex="-1"></a>BENITO_OUT_tf <span class="ot">&lt;-</span> df.fugas.clean <span class="sc">%&gt;%</span></span>
<span id="cb136-798"><a href="#cb136-798" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(alcaldia <span class="sc">==</span> <span class="st">'BENITO JUAREZ'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-799"><a href="#cb136-799" aria-hidden="true" tabindex="-1"></a>              <span class="fu">group_by</span>(fecha, tipo_de_falla, quien_atiende, colonia_datos_abiertos) <span class="sc">%&gt;%</span></span>
<span id="cb136-800"><a href="#cb136-800" aria-hidden="true" tabindex="-1"></a>              <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>(), <span class="at">.groups =</span> <span class="st">'drop'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb136-801"><a href="#cb136-801" aria-hidden="true" tabindex="-1"></a>              <span class="fu">filter</span>(count <span class="sc">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb136-802"><a href="#cb136-802" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb136-803"><a href="#cb136-803" aria-hidden="true" tabindex="-1"></a>BENITO_OUT_tf</span>
<span id="cb136-804"><a href="#cb136-804" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-805"><a href="#cb136-805" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-806"><a href="#cb136-806" aria-hidden="true" tabindex="-1"></a><span class="fu">### Principales inferencias de la información</span></span>
<span id="cb136-807"><a href="#cb136-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-808"><a href="#cb136-808" aria-hidden="true" tabindex="-1"></a>Interpretación y Conclusiones</span>
<span id="cb136-809"><a href="#cb136-809" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-812"><a href="#cb136-812" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-813"><a href="#cb136-813" aria-hidden="true" tabindex="-1"></a>graf_tf</span>
<span id="cb136-814"><a href="#cb136-814" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-815"><a href="#cb136-815" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-816"><a href="#cb136-816" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-819"><a href="#cb136-819" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-820"><a href="#cb136-820" aria-hidden="true" tabindex="-1"></a>completo</span>
<span id="cb136-821"><a href="#cb136-821" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-822"><a href="#cb136-822" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-823"><a href="#cb136-823" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de las alcaldías, podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad.</span>
<span id="cb136-824"><a href="#cb136-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-825"><a href="#cb136-825" aria-hidden="true" tabindex="-1"></a>Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales no se encuentran tan alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes fueron por de falta de agua.</span>
<span id="cb136-826"><a href="#cb136-826" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-827"><a href="#cb136-827" aria-hidden="true" tabindex="-1"></a>Álvaro Obregón</span>
<span id="cb136-828"><a href="#cb136-828" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-829"><a href="#cb136-829" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad.</span>
<span id="cb136-830"><a href="#cb136-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-831"><a href="#cb136-831" aria-hidden="true" tabindex="-1"></a>Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales no se encuentran tan alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes fueron por de falta de agua.</span>
<span id="cb136-832"><a href="#cb136-832" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-833"><a href="#cb136-833" aria-hidden="true" tabindex="-1"></a>Azcapotzalco</span>
<span id="cb136-834"><a href="#cb136-834" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-835"><a href="#cb136-835" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola muy pronunciada a la derecha, lo que vemos en la gráfica de densidad. Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que en esta alcaldía no tenemos valores atípicos. Lo que nos indica que aunque sí hay fallas, no hay una inclunación irregular hacia una sola una. Pudiendo concluir que se tiene un funcionamiento regular.</span>
<span id="cb136-836"><a href="#cb136-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-837"><a href="#cb136-837" aria-hidden="true" tabindex="-1"></a>Benito Juárez</span>
<span id="cb136-838"><a href="#cb136-838" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-839"><a href="#cb136-839" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola a la derecha, lo que vemos en la gráfica de densidad. Tomando como referencia los deciles, los cuartiles, el IQ y el diagrama de caja podemos decir que tenemos bastantes valores atípicos en nuestra distribución, los cuales se encuentran muy alejados de nuestros datos centrales. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que todos los reportes fueron por falta de agua.</span>
<span id="cb136-840"><a href="#cb136-840" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-841"><a href="#cb136-841" aria-hidden="true" tabindex="-1"></a>Coyoacán</span>
<span id="cb136-842"><a href="#cb136-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-843"><a href="#cb136-843" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una ligera cola hacia la derecha, lo que vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución, los cuales se encuentran un poco alejados de nuestro decil 9. Estos outliers nos representan una posible falla en la red de distribución del agua en la alcaldía debido a que los reportes recibidos fueron por falta de agua.</span>
<span id="cb136-844"><a href="#cb136-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-845"><a href="#cb136-845" aria-hidden="true" tabindex="-1"></a>Cuajimalpa de Morelos</span>
<span id="cb136-846"><a href="#cb136-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-847"><a href="#cb136-847" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una pequeña cola hacia la derecha, lo que vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja notamos que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</span>
<span id="cb136-848"><a href="#cb136-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-849"><a href="#cb136-849" aria-hidden="true" tabindex="-1"></a>Cuauhtémoc</span>
<span id="cb136-850"><a href="#cb136-850" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-851"><a href="#cb136-851" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha bastante pronunciada, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja notamos que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</span>
<span id="cb136-852"><a href="#cb136-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-853"><a href="#cb136-853" aria-hidden="true" tabindex="-1"></a>Gustavo A. Madero</span>
<span id="cb136-854"><a href="#cb136-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-855"><a href="#cb136-855" aria-hidden="true" tabindex="-1"></a>Analizando los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que tenemos pocos valores atípicos en nuestra distribución.Aunque estos outliers no están tan alejados de nustros datos centrales, nos indican que la falla predominante en esta alcaldía es la falta de agua.</span>
<span id="cb136-856"><a href="#cb136-856" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-857"><a href="#cb136-857" aria-hidden="true" tabindex="-1"></a>Iztacalco</span>
<span id="cb136-858"><a href="#cb136-858" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-859"><a href="#cb136-859" aria-hidden="true" tabindex="-1"></a>Al revisar los datos estadísticos y las gráficas obtenidas a partir de la información de la alcaldía. Podemos destacar que la asimetría nos indica una distribución con una cola hacia la derecha, lo que también vemos en la gráfica de densidad. Revisando los deciles, cuartiles, el IQ y el diagrama de caja podemos decir que no tenemos valores atípicos en nuestra distribución,lo que nos indica un funcionamiento regular de la red de distribución.</span>
<span id="cb136-860"><a href="#cb136-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-861"><a href="#cb136-861" aria-hidden="true" tabindex="-1"></a>Iztapalapa</span>
<span id="cb136-862"><a href="#cb136-862" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-863"><a href="#cb136-863" aria-hidden="true" tabindex="-1"></a>Se puede observar que la mayoría de los reportes de fallas se deben a falta de agua, sin embargo, una parte importante de los reportes se debe también a las fugas, prácticamente no se llevan a cabo reportes de mala calidad del agua. Podemos notar un importante aumento de reportes en el mes de septiembre del 2018, posteriormente, vemos picos de actividad, sin embargo, la tendencia es decreciente.</span>
<span id="cb136-864"><a href="#cb136-864" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-865"><a href="#cb136-865" aria-hidden="true" tabindex="-1"></a>Magdalena Contreras</span>
<span id="cb136-866"><a href="#cb136-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-867"><a href="#cb136-867" aria-hidden="true" tabindex="-1"></a>En esta alcaldía podemos observar que la cantidad de reportes es mucho menor en general, sin embargo, como en las demás alcaldías, la mayor parte de reportes se debe a falta de agua. A diferencia de la mayoría de las otras alcaldías, podemos ver que un incremento importante se realizó en julio del 2019, fecha atípica en las demás alcaldías.</span>
<span id="cb136-868"><a href="#cb136-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-869"><a href="#cb136-869" aria-hidden="true" tabindex="-1"></a>Miguel Hidalgo</span>
<span id="cb136-870"><a href="#cb136-870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-871"><a href="#cb136-871" aria-hidden="true" tabindex="-1"></a>La distribución de los reportes por fugas de agua en esta alcaldía es una distribución un poco mas normal que en el resto, se pueden ver picos importantes en marzo del 2019 y en enero del 2020 Milpalta Es la alcaldía donde se presentan menos reportes de fallas en el suministro de agua, esto podría deberse a que gran parte es zona rural, no se comporta de manera normal, y presenta muchos valores atípicos.</span>
<span id="cb136-872"><a href="#cb136-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-873"><a href="#cb136-873" aria-hidden="true" tabindex="-1"></a>Tlahuac</span>
<span id="cb136-874"><a href="#cb136-874" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-875"><a href="#cb136-875" aria-hidden="true" tabindex="-1"></a>En esta alcaldía la distribución es parecida a la alcaldía de Milpalta, ambas son zonas rurales, sin embargo, se presentaron muchos mas reportes, la mayor parte de los datos se presentan en el primer semestre del 2019.</span>
<span id="cb136-876"><a href="#cb136-876" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-877"><a href="#cb136-877" aria-hidden="true" tabindex="-1"></a>Tlalpan</span>
<span id="cb136-878"><a href="#cb136-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-879"><a href="#cb136-879" aria-hidden="true" tabindex="-1"></a>En esta alcaldía la distribución no se presenta de manera normal, hay una gran variación de los datos y no son uniformes, se observan muchos datos atípicos, hay bastantes reportes esto podría ser porque es una alcaldía con alta densidad poblacional.</span>
<span id="cb136-880"><a href="#cb136-880" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-881"><a href="#cb136-881" aria-hidden="true" tabindex="-1"></a>Venustiano Carranza</span>
<span id="cb136-882"><a href="#cb136-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-883"><a href="#cb136-883" aria-hidden="true" tabindex="-1"></a>Podemos observar que los datos en esta alcaldía no son uniformes, la distribución nos dice que la mayor parte de los eventos son por falta de agua y varían de manera importante de mes a mes, se observan valores atípicos de manera constante.</span>
<span id="cb136-884"><a href="#cb136-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-885"><a href="#cb136-885" aria-hidden="true" tabindex="-1"></a>Xochimilco</span>
<span id="cb136-886"><a href="#cb136-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-887"><a href="#cb136-887" aria-hidden="true" tabindex="-1"></a>Se observa una cola hacia la izquierda, indicando que la mayoría de los reportes realizados se llevan a cabo para reportar falta del suministro de agua potable y los reportes se agrupa la mayoría a la izquierda y disminuye la incidencia a lo largo&nbsp;del&nbsp;tiempo.</span>
<span id="cb136-888"><a href="#cb136-888" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-889"><a href="#cb136-889" aria-hidden="true" tabindex="-1"></a><span class="fu">## Metodología del Modelo</span></span>
<span id="cb136-890"><a href="#cb136-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-891"><a href="#cb136-891" aria-hidden="true" tabindex="-1"></a>**Librerías**</span>
<span id="cb136-892"><a href="#cb136-892" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-895"><a href="#cb136-895" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-896"><a href="#cb136-896" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb136-897"><a href="#cb136-897" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb136-898"><a href="#cb136-898" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tseries)</span>
<span id="cb136-899"><a href="#cb136-899" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb136-900"><a href="#cb136-900" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb136-901"><a href="#cb136-901" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stats)</span>
<span id="cb136-902"><a href="#cb136-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-903"><a href="#cb136-903" aria-hidden="true" tabindex="-1"></a><span class="co">#list.files()</span></span>
<span id="cb136-904"><a href="#cb136-904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-905"><a href="#cb136-905" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen=</span><span class="dv">999</span>)</span>
<span id="cb136-906"><a href="#cb136-906" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-907"><a href="#cb136-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-908"><a href="#cb136-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-909"><a href="#cb136-909" aria-hidden="true" tabindex="-1"></a>**Lectura de la base, y agrupación por fecha.**</span>
<span id="cb136-910"><a href="#cb136-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-911"><a href="#cb136-911" aria-hidden="true" tabindex="-1"></a>Se decidió utilizar los datos hasta el 01-12-2021, y dejar el mes de diciembre de 2021 para probar el modelo.</span>
<span id="cb136-912"><a href="#cb136-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-915"><a href="#cb136-915" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-916"><a href="#cb136-916" aria-hidden="true" tabindex="-1"></a><span class="co">#Lectura de archivo</span></span>
<span id="cb136-917"><a href="#cb136-917" aria-hidden="true" tabindex="-1"></a>agua_cdmx<span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">'E:/BEDU/Curso 5/Proyecto/Datos/reportes_agua_hist.csv'</span>)</span>
<span id="cb136-918"><a href="#cb136-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-919"><a href="#cb136-919" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="ot">&lt;-</span> agua_cdmx <span class="sc">%&gt;%</span> <span class="fu">select</span>(fecha) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(fecha ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">reportes=</span><span class="fu">n</span>())</span>
<span id="cb136-920"><a href="#cb136-920" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="sc">$</span>fecha<span class="ot">&lt;-</span> <span class="fu">as.Date</span>(agua_serie<span class="sc">$</span>fecha)</span>
<span id="cb136-921"><a href="#cb136-921" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-922"><a href="#cb136-922" aria-hidden="true" tabindex="-1"></a><span class="co">#esta base nos ayudara a comprobar una vez validado el modelo</span></span>
<span id="cb136-923"><a href="#cb136-923" aria-hidden="true" tabindex="-1"></a>serie_comprobadora<span class="ot">&lt;-</span>agua_serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fecha<span class="sc">&gt;=</span><span class="st">"2021-12-01"</span>)</span>
<span id="cb136-924"><a href="#cb136-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-925"><a href="#cb136-925" aria-hidden="true" tabindex="-1"></a><span class="co">#Filtramos la fecha y graficamos</span></span>
<span id="cb136-926"><a href="#cb136-926" aria-hidden="true" tabindex="-1"></a>agua_serie<span class="ot">&lt;-</span>agua_serie <span class="sc">%&gt;%</span> <span class="fu">filter</span>(fecha<span class="sc">&lt;</span><span class="st">"2021-12-01"</span>)</span>
<span id="cb136-927"><a href="#cb136-927" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-928"><a href="#cb136-928" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(agua_serie, <span class="fu">aes</span>(<span class="at">x=</span>fecha,<span class="at">y =</span> reportes)) <span class="sc">+</span></span>
<span id="cb136-929"><a href="#cb136-929" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span>
<span id="cb136-930"><a href="#cb136-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-931"><a href="#cb136-931" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-932"><a href="#cb136-932" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-933"><a href="#cb136-933" aria-hidden="true" tabindex="-1"></a>**Serie de tiempo**</span>
<span id="cb136-934"><a href="#cb136-934" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-937"><a href="#cb136-937" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-938"><a href="#cb136-938" aria-hidden="true" tabindex="-1"></a><span class="co">#Creamos la serie de tiempo</span></span>
<span id="cb136-939"><a href="#cb136-939" aria-hidden="true" tabindex="-1"></a>serie_agua<span class="ot">&lt;-</span><span class="fu">ts</span>(agua_serie,<span class="at">frequency=</span><span class="dv">365</span>, <span class="at">start=</span><span class="fu">c</span>(<span class="dv">2018</span>, <span class="dv">1</span>))</span>
<span id="cb136-940"><a href="#cb136-940" aria-hidden="true" tabindex="-1"></a><span class="fu">decompose</span>(serie_agua[,<span class="dv">2</span>]) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span>
<span id="cb136-941"><a href="#cb136-941" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(serie_agua[,<span class="dv">2</span>], <span class="at">alternative =</span> <span class="st">"stationary"</span>)</span>
<span id="cb136-942"><a href="#cb136-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-943"><a href="#cb136-943" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-944"><a href="#cb136-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-945"><a href="#cb136-945" aria-hidden="true" tabindex="-1"></a>*Contraste de hipótesis:*</span>
<span id="cb136-946"><a href="#cb136-946" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-947"><a href="#cb136-947" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>H0: No estacionaria</span>
<span id="cb136-948"><a href="#cb136-948" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-949"><a href="#cb136-949" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>H1: Estacionaria</span>
<span id="cb136-950"><a href="#cb136-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-951"><a href="#cb136-951" aria-hidden="true" tabindex="-1"></a>Tras realizar la prueba aumentada de Dickey-Fuller (ADF), obtenemos un p-valor = 0.01.</span>
<span id="cb136-952"><a href="#cb136-952" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-953"><a href="#cb136-953" aria-hidden="true" tabindex="-1"></a>Como el **p-valor \&lt; 0.05**, rechazamos H0, la serie es estacionaria.</span>
<span id="cb136-954"><a href="#cb136-954" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-955"><a href="#cb136-955" aria-hidden="true" tabindex="-1"></a>**Realizando la prueba de autocorrelación podemos ver que la serie no tiene una caída exponencial**</span>
<span id="cb136-956"><a href="#cb136-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-959"><a href="#cb136-959" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-960"><a href="#cb136-960" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(serie_agua[,<span class="dv">2</span>])) </span>
<span id="cb136-961"><a href="#cb136-961" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-962"><a href="#cb136-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-963"><a href="#cb136-963" aria-hidden="true" tabindex="-1"></a>Aunque la serie presenta de origen estacionariedad, probamos corriendo la función ndiffs(), para verificar si es necesario aplicar alguna diferencia al momento de correr el modelo.</span>
<span id="cb136-964"><a href="#cb136-964" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-965"><a href="#cb136-965" aria-hidden="true" tabindex="-1"></a>La función ndiffs nos muestra que la serie debería tener 1 diferencia.</span>
<span id="cb136-966"><a href="#cb136-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-969"><a href="#cb136-969" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-970"><a href="#cb136-970" aria-hidden="true" tabindex="-1"></a><span class="fu">ndiffs</span>(serie_agua[,<span class="dv">2</span>]) </span>
<span id="cb136-971"><a href="#cb136-971" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-972"><a href="#cb136-972" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-973"><a href="#cb136-973" aria-hidden="true" tabindex="-1"></a>*A partir de este gráfico podemos ver que ya se crea un cambio exponencial en la autocorrelación.*</span>
<span id="cb136-974"><a href="#cb136-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-977"><a href="#cb136-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-978"><a href="#cb136-978" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(<span class="fu">diff</span>(serie_agua[,<span class="dv">2</span>]))) </span>
<span id="cb136-979"><a href="#cb136-979" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-980"><a href="#cb136-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-981"><a href="#cb136-981" aria-hidden="true" tabindex="-1"></a>Por ello aplicaremos "Una diferencia" para trabajar el modelo y observamos graficamente como se comporta la serie.</span>
<span id="cb136-982"><a href="#cb136-982" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-985"><a href="#cb136-985" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-986"><a href="#cb136-986" aria-hidden="true" tabindex="-1"></a>d1_agua<span class="ot">&lt;-</span><span class="fu">diff</span>(serie_agua[,<span class="dv">2</span>])</span>
<span id="cb136-987"><a href="#cb136-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-988"><a href="#cb136-988" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(d1_agua)  </span>
<span id="cb136-989"><a href="#cb136-989" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-990"><a href="#cb136-990" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-991"><a href="#cb136-991" aria-hidden="true" tabindex="-1"></a>Corroboramos estacionaridad.</span>
<span id="cb136-992"><a href="#cb136-992" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-995"><a href="#cb136-995" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-996"><a href="#cb136-996" aria-hidden="true" tabindex="-1"></a><span class="fu">adf.test</span>(d1_agua,<span class="at">alternative=</span><span class="st">"stationary"</span>) </span>
<span id="cb136-997"><a href="#cb136-997" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-998"><a href="#cb136-998" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-999"><a href="#cb136-999" aria-hidden="true" tabindex="-1"></a>Como podemos ver en el gráfico ahora la distribución se ajusta a una media cero, con un comportamiento aleatorio. Esto se corrobora de nuevo con la prueba Dicky-Fuller Aumentada donde el P-value = 0.01, por ende P-value <span class="sc">\&lt;</span> 0.05, se afirma la estacionariedad para trabajar en la seri.e</span>
<span id="cb136-1000"><a href="#cb136-1000" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1001"><a href="#cb136-1001" aria-hidden="true" tabindex="-1"></a>EL valor a usar de "d" sera igual a 1.</span>
<span id="cb136-1002"><a href="#cb136-1002" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1003"><a href="#cb136-1003" aria-hidden="true" tabindex="-1"></a>**MA**</span>
<span id="cb136-1004"><a href="#cb136-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1005"><a href="#cb136-1005" aria-hidden="true" tabindex="-1"></a>Para encontrar los valores que ocuparan los parámetros para p y q del Modelo, aplicaremos las pruebas de autocorrelación y autocorrelación parcial, esta prueba la aplicaremos a la serie generada con una diferencia.</span>
<span id="cb136-1006"><a href="#cb136-1006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1009"><a href="#cb136-1009" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1010"><a href="#cb136-1010" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">acf</span>(d1_agua))</span>
<span id="cb136-1011"><a href="#cb136-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1012"><a href="#cb136-1012" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1013"><a href="#cb136-1013" aria-hidden="true" tabindex="-1"></a>Como vemos en el gráfico el lag 2 es el que sobre sale, así como el lag 3 <span class="sc">\#</span> q = 2 , 3</span>
<span id="cb136-1014"><a href="#cb136-1014" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1015"><a href="#cb136-1015" aria-hidden="true" tabindex="-1"></a>**AR**</span>
<span id="cb136-1016"><a href="#cb136-1016" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1017"><a href="#cb136-1017" aria-hidden="true" tabindex="-1"></a>Aplicaremos la prueba de correlación parcial para obtener en número de AR(Auto regresivos) a usar en el modelo.</span>
<span id="cb136-1018"><a href="#cb136-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1021"><a href="#cb136-1021" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1022"><a href="#cb136-1022" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">pacf</span>(d1_agua))</span>
<span id="cb136-1023"><a href="#cb136-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1024"><a href="#cb136-1024" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1025"><a href="#cb136-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1026"><a href="#cb136-1026" aria-hidden="true" tabindex="-1"></a>En el gráfico obtenido observamos que los lags posibles son para p:</span>
<span id="cb136-1027"><a href="#cb136-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1028"><a href="#cb136-1028" aria-hidden="true" tabindex="-1"></a>p=2,3,4,5</span>
<span id="cb136-1029"><a href="#cb136-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1030"><a href="#cb136-1030" aria-hidden="true" tabindex="-1"></a>**ARIMA(p,d,q)**</span>
<span id="cb136-1031"><a href="#cb136-1031" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1032"><a href="#cb136-1032" aria-hidden="true" tabindex="-1"></a>De acuerdo a los valores obtenidos previamente se plantean los siguientes modelos:</span>
<span id="cb136-1033"><a href="#cb136-1033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1036"><a href="#cb136-1036" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1037"><a href="#cb136-1037" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo 1 (2,1,2)</span></span>
<span id="cb136-1038"><a href="#cb136-1038" aria-hidden="true" tabindex="-1"></a>m1<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb136-1039"><a href="#cb136-1039" aria-hidden="true" tabindex="-1"></a>m1</span>
<span id="cb136-1040"><a href="#cb136-1040" aria-hidden="true" tabindex="-1"></a>bx_m1<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m1),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1041"><a href="#cb136-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1042"><a href="#cb136-1042" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 2 (3,1,2)</span></span>
<span id="cb136-1043"><a href="#cb136-1043" aria-hidden="true" tabindex="-1"></a>m2<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb136-1044"><a href="#cb136-1044" aria-hidden="true" tabindex="-1"></a>m2</span>
<span id="cb136-1045"><a href="#cb136-1045" aria-hidden="true" tabindex="-1"></a>bx_m2<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m2),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1046"><a href="#cb136-1046" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1047"><a href="#cb136-1047" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 3 (4,1,2)</span></span>
<span id="cb136-1048"><a href="#cb136-1048" aria-hidden="true" tabindex="-1"></a>m3<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb136-1049"><a href="#cb136-1049" aria-hidden="true" tabindex="-1"></a>m3</span>
<span id="cb136-1050"><a href="#cb136-1050" aria-hidden="true" tabindex="-1"></a>bx_m3<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m3),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1051"><a href="#cb136-1051" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1052"><a href="#cb136-1052" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 4 (5,1,2)</span></span>
<span id="cb136-1053"><a href="#cb136-1053" aria-hidden="true" tabindex="-1"></a>m4<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb136-1054"><a href="#cb136-1054" aria-hidden="true" tabindex="-1"></a>m4</span>
<span id="cb136-1055"><a href="#cb136-1055" aria-hidden="true" tabindex="-1"></a>bx_m4<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m4),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1056"><a href="#cb136-1056" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1057"><a href="#cb136-1057" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 5 (2,1,3)</span></span>
<span id="cb136-1058"><a href="#cb136-1058" aria-hidden="true" tabindex="-1"></a>m5<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb136-1059"><a href="#cb136-1059" aria-hidden="true" tabindex="-1"></a>m5</span>
<span id="cb136-1060"><a href="#cb136-1060" aria-hidden="true" tabindex="-1"></a>bx_m5<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m5),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1061"><a href="#cb136-1061" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1062"><a href="#cb136-1062" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 6 (3,1,3)</span></span>
<span id="cb136-1063"><a href="#cb136-1063" aria-hidden="true" tabindex="-1"></a>m6<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb136-1064"><a href="#cb136-1064" aria-hidden="true" tabindex="-1"></a>m6</span>
<span id="cb136-1065"><a href="#cb136-1065" aria-hidden="true" tabindex="-1"></a>bx_m6<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m6),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1066"><a href="#cb136-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1067"><a href="#cb136-1067" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 7 (4,1,3)</span></span>
<span id="cb136-1068"><a href="#cb136-1068" aria-hidden="true" tabindex="-1"></a>m7<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb136-1069"><a href="#cb136-1069" aria-hidden="true" tabindex="-1"></a>m7</span>
<span id="cb136-1070"><a href="#cb136-1070" aria-hidden="true" tabindex="-1"></a>bx_m7<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m7),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1071"><a href="#cb136-1071" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1072"><a href="#cb136-1072" aria-hidden="true" tabindex="-1"></a><span class="co">#Modelo 8 (5,1,3)</span></span>
<span id="cb136-1073"><a href="#cb136-1073" aria-hidden="true" tabindex="-1"></a>m8<span class="ot">&lt;-</span><span class="fu">arima</span>(serie_agua[,<span class="dv">2</span>],<span class="at">order =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb136-1074"><a href="#cb136-1074" aria-hidden="true" tabindex="-1"></a>m8</span>
<span id="cb136-1075"><a href="#cb136-1075" aria-hidden="true" tabindex="-1"></a>bx_m8<span class="ot">&lt;-</span><span class="fu">Box.test</span>(<span class="fu">residuals</span>(m8),<span class="at">type=</span><span class="st">"Ljung-Box"</span>)</span>
<span id="cb136-1076"><a href="#cb136-1076" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1077"><a href="#cb136-1077" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1078"><a href="#cb136-1078" aria-hidden="true" tabindex="-1"></a><span class="co">#Tabla Modelos</span></span>
<span id="cb136-1079"><a href="#cb136-1079" aria-hidden="true" tabindex="-1"></a>modelos_p<span class="ot">&lt;-</span><span class="fu">data.frame</span>(<span class="st">"ARIMA"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"Modelo 1 (2,1,2)"</span>,<span class="st">"Modelo 2 (3,1,2)"</span>,</span>
<span id="cb136-1080"><a href="#cb136-1080" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo 3 (4,1,2)"</span>,<span class="st">"Modelo 4 (5,1,2)"</span>,<span class="st">"Modelo 5 (2,1,3)"</span>,</span>
<span id="cb136-1081"><a href="#cb136-1081" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo 6 (3,1,3)"</span>,<span class="st">"Modelo 7 (4,1,3)"</span>,<span class="st">"Modelo 8 (5,1,3)"</span>),</span>
<span id="cb136-1082"><a href="#cb136-1082" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"AIC"</span> <span class="ot">=</span> <span class="fu">c</span>(m1<span class="sc">$</span>aic,m2<span class="sc">$</span>aic,m3<span class="sc">$</span>aic,m4<span class="sc">$</span>aic,m5<span class="sc">$</span>aic,m6<span class="sc">$</span>aic,m7<span class="sc">$</span>aic,m8<span class="sc">$</span>aic),</span>
<span id="cb136-1083"><a href="#cb136-1083" aria-hidden="true" tabindex="-1"></a>                      <span class="st">"p_value_Ljunk_Box"</span><span class="ot">=</span><span class="fu">c</span>(bx_m1<span class="sc">$</span>p.value, bx_m2<span class="sc">$</span>p.value, bx_m3<span class="sc">$</span>p.value,</span>
<span id="cb136-1084"><a href="#cb136-1084" aria-hidden="true" tabindex="-1"></a>                                            bx_m4<span class="sc">$</span>p.value, bx_m5<span class="sc">$</span>p.value, bx_m6<span class="sc">$</span>p.value,</span>
<span id="cb136-1085"><a href="#cb136-1085" aria-hidden="true" tabindex="-1"></a>                                            bx_m7<span class="sc">$</span>p.value, bx_m8<span class="sc">$</span>p.value)</span>
<span id="cb136-1086"><a href="#cb136-1086" aria-hidden="true" tabindex="-1"></a>                      )</span>
<span id="cb136-1087"><a href="#cb136-1087" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1088"><a href="#cb136-1088" aria-hidden="true" tabindex="-1"></a>modelos_p<span class="ot">&lt;-</span> modelos_p <span class="sc">%&gt;%</span> </span>
<span id="cb136-1089"><a href="#cb136-1089" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mutate</span>(<span class="st">"p_value&gt;0.05"</span> <span class="ot">=</span> <span class="fu">ifelse</span>(p_value_Ljunk_Box <span class="sc">&gt;</span><span class="fl">0.05</span>,<span class="st">"VERDADERO"</span> ,<span class="st">"FALSO"</span>))</span>
<span id="cb136-1090"><a href="#cb136-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1091"><a href="#cb136-1091" aria-hidden="true" tabindex="-1"></a>modelos_p</span>
<span id="cb136-1092"><a href="#cb136-1092" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1093"><a href="#cb136-1093" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1094"><a href="#cb136-1094" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1095"><a href="#cb136-1095" aria-hidden="true" tabindex="-1"></a>*La tabla nos muestra los valores AIC y el p_value de la prueba Ljung-Box*.</span>
<span id="cb136-1096"><a href="#cb136-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1097"><a href="#cb136-1097" aria-hidden="true" tabindex="-1"></a>Donde el modelo 4 y 8 presenta los valores mas pequeños para el AIC, pero si revisamos los residuales de donde nace el P_value de la prueba Ljunk Box, vemos que en el modelo 8 el p-value es menor a 0.05 por lo que se muestra que existe autocorrelación en los residuos</span>
<span id="cb136-1098"><a href="#cb136-1098" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1099"><a href="#cb136-1099" aria-hidden="true" tabindex="-1"></a>Para validar si los residuos se distribuyen de forma normal, se aplica el test de normalidad Shapiro-Wilk, que es una prueba estadística utilizada para evaluar si una muestra de datos sigue una distribución normal.</span>
<span id="cb136-1100"><a href="#cb136-1100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1101"><a href="#cb136-1101" aria-hidden="true" tabindex="-1"></a>Las hipótesis nula y alternativa del test de Shapiro-Wilk son las siguientes:</span>
<span id="cb136-1102"><a href="#cb136-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1103"><a href="#cb136-1103" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**H0: Los residuos siguen una distribución normal.**</span>
<span id="cb136-1104"><a href="#cb136-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1105"><a href="#cb136-1105" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>**H1: Los residuos NO siguen una distribución normal.**</span>
<span id="cb136-1106"><a href="#cb136-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1107"><a href="#cb136-1107" aria-hidden="true" tabindex="-1"></a>El **valor p es menor que un nivel de significancia de 0.05, se puede rechazar la hipótesis nula** y concluir que la muestra no sigue una distribución normal.</span>
<span id="cb136-1108"><a href="#cb136-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1111"><a href="#cb136-1111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1112"><a href="#cb136-1112" aria-hidden="true" tabindex="-1"></a><span class="fu">shapiro.test</span>(m4<span class="sc">$</span>residuals)</span>
<span id="cb136-1113"><a href="#cb136-1113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1114"><a href="#cb136-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1115"><a href="#cb136-1115" aria-hidden="true" tabindex="-1"></a>Los errores se mueven alrededor de una media = 0</span>
<span id="cb136-1116"><a href="#cb136-1116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1119"><a href="#cb136-1119" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1120"><a href="#cb136-1120" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(<span class="fu">residuals</span>(m4))</span>
<span id="cb136-1121"><a href="#cb136-1121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1122"><a href="#cb136-1122" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1123"><a href="#cb136-1123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1124"><a href="#cb136-1124" aria-hidden="true" tabindex="-1"></a>Los valores son normales ya que descansan en una línea y no están por todos lados</span>
<span id="cb136-1125"><a href="#cb136-1125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1128"><a href="#cb136-1128" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1129"><a href="#cb136-1129" aria-hidden="true" tabindex="-1"></a>errores<span class="ot">&lt;-</span><span class="fu">residuals</span>(m4)</span>
<span id="cb136-1130"><a href="#cb136-1130" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(errores)</span>
<span id="cb136-1131"><a href="#cb136-1131" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(errores,<span class="at">col=</span><span class="st">"red"</span>,<span class="at">lwd=</span><span class="dv">2</span>) </span>
<span id="cb136-1132"><a href="#cb136-1132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1133"><a href="#cb136-1133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1134"><a href="#cb136-1134" aria-hidden="true" tabindex="-1"></a>**Una vez elegido el mejor modelo procedemos a crear nuestro pronóstico**</span>
<span id="cb136-1135"><a href="#cb136-1135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1138"><a href="#cb136-1138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb136-1139"><a href="#cb136-1139" aria-hidden="true" tabindex="-1"></a>pronostico<span class="ot">&lt;-</span><span class="fu">forecast</span>(m4, <span class="at">h=</span><span class="dv">31</span>, <span class="at">level =</span> <span class="dv">95</span>)</span>
<span id="cb136-1140"><a href="#cb136-1140" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pronostico)</span>
<span id="cb136-1141"><a href="#cb136-1141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1142"><a href="#cb136-1142" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pronostico<span class="sc">$</span>mean, <span class="at">col=</span><span class="st">"blue"</span>)<span class="sc">+</span></span>
<span id="cb136-1143"><a href="#cb136-1143" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>upper),<span class="at">col=</span><span class="st">"green"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>upper))<span class="sc">+</span></span>
<span id="cb136-1144"><a href="#cb136-1144" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>lower),<span class="at">col=</span><span class="st">"green"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>pronostico<span class="sc">$</span>lower))<span class="sc">+</span></span>
<span id="cb136-1145"><a href="#cb136-1145" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>serie_comprobadora<span class="sc">$</span>reportes),<span class="at">col=</span><span class="st">"red"</span>)<span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>serie_comprobadora<span class="sc">$</span>reportes))</span>
<span id="cb136-1146"><a href="#cb136-1146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1147"><a href="#cb136-1147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb136-1148"><a href="#cb136-1148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1149"><a href="#cb136-1149" aria-hidden="true" tabindex="-1"></a><span class="fu">### Resultados Shiny</span></span>
<span id="cb136-1150"><a href="#cb136-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1151"><a href="#cb136-1151" aria-hidden="true" tabindex="-1"></a>Link al Cloud para ver la aplicación Shiny.</span>
<span id="cb136-1152"><a href="#cb136-1152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1153"><a href="#cb136-1153" aria-hidden="true" tabindex="-1"></a><span class="fu">## Conclusiones</span></span>
<span id="cb136-1154"><a href="#cb136-1154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1155"><a href="#cb136-1155" aria-hidden="true" tabindex="-1"></a>Interpretación de los resultados del modelo</span>
<span id="cb136-1156"><a href="#cb136-1156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1157"><a href="#cb136-1157" aria-hidden="true" tabindex="-1"></a><span class="fu">## Referencias</span></span>
<span id="cb136-1158"><a href="#cb136-1158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1159"><a href="#cb136-1159" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Limache Sandoval, E. M. (2021). Modelo ARIMA sobre el consumo de agua de uso poblacional en la ciudad de Tacna.&nbsp;*REVISTA VERITAS ET SCIENTIA - UPT*,&nbsp;*10*(1), 69–82. https://doi.org/10.47796/ves.v10i1.461</span>
<span id="cb136-1160"><a href="#cb136-1160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1161"><a href="#cb136-1161" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Datos Abiertos: Consumo de agua. SACMEX <span class="ot">&lt;https://datos.cdmx.gob.mx/sv/dataset/consumo-agua&gt;</span></span>
<span id="cb136-1162"><a href="#cb136-1162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1163"><a href="#cb136-1163" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Datos Abiertos: Reportes de agua. SACMEX <span class="ot">&lt;https://datos.cdmx.gob.mx/dataset/reportes-de-agua&gt;</span></span>
<span id="cb136-1164"><a href="#cb136-1164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1165"><a href="#cb136-1165" aria-hidden="true" tabindex="-1"></a><span class="fu">## Integrantes:</span></span>
<span id="cb136-1166"><a href="#cb136-1166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1167"><a href="#cb136-1167" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Diego Rosales</span>
<span id="cb136-1168"><a href="#cb136-1168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1169"><a href="#cb136-1169" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Carlos Guerra</span>
<span id="cb136-1170"><a href="#cb136-1170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1171"><a href="#cb136-1171" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Jorge Limas</span>
<span id="cb136-1172"><a href="#cb136-1172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1173"><a href="#cb136-1173" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Pedro García</span>
<span id="cb136-1174"><a href="#cb136-1174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1175"><a href="#cb136-1175" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Alexis Leal</span>
<span id="cb136-1176"><a href="#cb136-1176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-1177"><a href="#cb136-1177" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Taryn Galindo</span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>